import random
# Flaskというライブラリを読み込む
from flask import Flask, render_template, request, redirect, url_for, session
from markupsafe import Markup, escape


# Flaskアプリのインスタンスを作成 	Flaskアプリの本体を作る
app = Flask(__name__)

app.secret_key = "super_secret_key"  # セッション用

@app.template_filter('nl2br')
def nl2br_filter(s):
    if s is None:
        return ""
    # 改行を <br> に置換して安全に返す
    return Markup(escape(s).replace("\n", "<br>\n"))

quiz_data = {
    "トピック 1: 組織割当およびプロセス統合": [
        # 問題 1
        {
            "question": "会社では、売上原価会計に従って損益計算書が構成されています。どの組織ユニットを定義する必要がありますか。",
            "choices": ["事業領域", "セグメント", "利益センタ", "機能領域"],
            "answer": "機能領域",
            "explanation": "売上原価会計において「機能領域」とは、会社の費用をどの業務で使ったのかを分けるための区分です。\n一つ目は、生産、管理、販売、マーケティング、研究開発といった業務ごとに費用を整理できることです。\n二つ目は、この区分ごとに損益計算書を作成できることです。\n\n例えば、家計簿を「食費」「光熱費」「教育費」などに分けるイメージで、会社も「生産費用」「販売費用」といった形で整理し、利益やコストをわかりやすく把握できるようにしています。",
        },

        # 問題 2
        {
            "question": "新たに登録した3つの会社コードを同じ管理領域に割り当てようとしています。すべての会社コードで共通である必要がある設定はどれですか。（2つ選択）",
            "choices": ["グループ通貨の元通貨", "運用勘定コード表", "会計年度バリアント", "会計期間バリアント"],
            "answer": ["運用勘定コード表", "会計年度バリアント"],
            "explanation": "管理領域は、管理会計における最も重要な組織要素で、原価や収益を管理・配分できる独立した組織構造のことです。\n一つ目のポイントは、複数の会社コードを1つの管理領域にまとめられることです。\n二つ目は、その場合に会社コード間で原価計算ができるようになりますが、すべての会社コードで同じ勘定コード表と会計年度バリアントを使う必要があるという点です。\n\n例えば、グループ企業が複数あっても「共通ルールの家計簿」を使うことで、グループ全体のコスト管理や収益管理を一括で行えるイメージです。",
        
        },

        # 問題 3
        {
            "question": "会社はフランスに拠点を置いていますが、法律で財務諸表が要求されているスイスに恒久的施設があります。スイスの恒久的施設に登録する必要がある組織ユニットはどれですか。",
            "choices": ["事業領域", "会社コード", "利益センタ", "セグメント"],
            "answer": "会社コード",
            "explanation": "会社コードは、企業グループ内の独立した法人などを表す単位で、法的に必要な会計処理を行う基礎となります。\n一つ目のポイントは、会社コードごとに貸借対照表や損益計算書といった財務諸表が作成されることです。\n二つ目は、FI（財務会計）で最低限必要な組織構造であり、財務諸表を作成するすべての組織に会社コードを登録する必要があるという点です。\n\n例えば、グループ会社の中でそれぞれが独立した法人として決算を行う場合、その法人ごとに「会社コード＝会計の箱」を用意して管理するイメージです。",
        
        },

        # 問題 4
        {
            "question": "SAP S/4HANA でデフォルト設定されている通貨タイプはどれですか。 （２つ選択）",
            "choices": ["10 = 会社コード通貨", "30 = グループ通貨", "20 = 管理領域通貨", "00 = 伝票通貨"],
            "answer": ["10 = 会社コード通貨", "00 = 伝票通貨"],
            "explanation": "システムが提供する標準通貨タイプは以下のとおりです。\n(1) 00：伝票通貨\n(2) 10：会社コード通貨\n(3) 20：管理領域通貨\n(4) 30：グループ通貨\n(5) 40：ハード通貨\n(6) 50：インデックス基準通貨\n(7) 60：グローバル会社通貨\n(8) 70：CO対象通貨\n\n一つ目のポイントは、デフォルトで選択されているのは「00（伝票通貨）」と「10（会社コード通貨）」であり、さらに必要に応じて他の通貨タイプを会社コードの元帳に対して定義できるという点です。\n二つ目は、標準で提供される通貨タイプだけでなく、業務の要件に応じて独自の通貨タイプを設定することも可能だという点です。\n\n例えば、海外子会社を持つ企業では「グループ全体で統一した通貨（30：グループ通貨）」を使うことで、連結決算をスムーズに進められるイメージです。",
        },

        # 問題 5
        {
            "question": "得意先の前受金が販売管理（SD）で処理される過程を的確に説明している文は次のどれですか。",
            "choices": [
                "前受金請求が Fl 備忘明細として登録された後、SD 受注が自動生成される。",
                "前受金請求が Fl 備忘明細として登録された後、SD 請求伝票が自動生成される。",
                "前受金請求が SD 受注として登録された後、備忘明細として Fl に自動的に転記される。",
                "前受金請求が SD 請求伝票として登録された後、備忘明細として Fl に自動的に転記される。"
            ],
            "answer": "前受金請求が SD 受注として登録された後、備忘明細として Fl に自動的に転記される。",
            "explanation": "前受金は、受注伝票に登録しておき、所定の期日に前受金請求として得意先に送付します。\n販売管理の前受金請求は、自動的に財務会計に転記され、備忘明細として記録されます。この明細には特殊仕訳コード「F」が設定されており、転記は統計上の目的で行われます。\n\n例えば、商品を先に受け取った場合でも、売上として正式に計上せずに「前受金」として一時的に管理するイメージです。",
        
        },

        # 問題 6
        {
            "question": "SAP S/4HANA に購買発注見越を実装する必要があります。以下のユースケースのうち、どれが関連しますか。 （２つ選択）",
            "choices": ["サービスの購入", "消費品目の購入", "在庫の原材料の購入", "固定資産の購入 (直接資本化方式を使用)"],
            "answer": ["サービスの購入", "消費品目の購入"],
            "explanation":"すでに発生しているが、会計管理でまだ転記されていない費用については、見越/繰延の転記が必要です。\n見越/繰延は費用に関係する購買に関連しており、例えば事務用品のように直接消費される品目の購買や、ITコンサルティングのように特定期間にわたって受け取るサービスの購買が該当します。\nただし、原材料などの在庫や固定資産の購買については、見越/繰延の転記は不要です。\n\n例えば、毎月の事務用品費やコンサルティング費用を前もって会計処理するイメージです。",
        
        },

        # 問題 7
        {
            "question": "連結準備を直接サポートするために使用されるオブジェクトはどれですか。",
            "choices": ["機能領域", "会社/取引パートナ", "元帳/元帳グループ", "セグメント/利益センタ"],
            "answer": "会社/取引パートナ",
            "explanation":"財務会計の連結機能は、会社ごとの「会社 ID」を基準にしており、グループ全体の連結会計を準備するために使われます。\n各会社 ID は、グループ内のシステム全体でデータが矛盾しないように管理され、すべての会社コードに必ず一意の会社 ID が割り当てられます。\n参加会社や関連会社（パートナ会社）の会社 ID は、もしその会社が補助元帳勘定として設定されている場合、得意先や仕入先のビジネスパートナに紐づけて管理する必要があります。\n\n例えば、グループ内で複数の会社がやり取りをする場合、各会社に専用のIDを割り振ることで、どの会社のデータかがすぐ分かり、数字や取引の間違いを防げるイメージです。",
        
        },

        # 問題 8
        {
            "question": "あなたの会社は IFRS 会計原則に従い、\"消費財\" と \"プロフェッショナル製品\" の 2つの主要部門について、完全な財務諸表を発行する必要があります。このシナリオでセグメントレポートを実現するために必要なものは何ですか。 （３つ選択）",
            "choices": ["収益性セグメント", "事業領域", "セグメント", "利益センタ", "伝票分割"],
            "answer": ["セグメント", "利益センタ", "伝票分割"],
            "explanation":"◆ セグメントレポートのベースとなるセグメンテーションは、利益センタから誘導されたセグメントを使用することが前提となる。 ◆ セグメントごとに完全な財務諸表を作成するためには、伝票分割を有効にする必要がある。",
        
        },

        # 問題 9
        {
            "question": "以下のうち、複数の会社コードで共有できる組織要素はどれですか。 （３つ選択）",
            "choices": ["販売組織", "プラント", "事業領域", "利益センタ", "セグメント"],
            "answer": ["事業領域", "利益センタ", "セグメント"],
            "explanation":"事業領域は、会社の中の個別の事業分野を表しており、複数の会社コードにまたがって利用することができます。\n利益センタは管理領域レベルで定義され、管理領域に割り当てられた会社コードの中から1つ以上の会社コードを選んで利益センタに割り当てることが可能です。\nセグメントは、企業のさまざまな業務活動の領域を示し、特定の会計原則に基づくセグメントレポートで利用できます。セグメントも複数の会社コードにまたがって使用することができます。\n販売組織は、販売管理の組織構造で1つの販売単位を表し、1つの会社コードにのみ割り当てられます。\nプラントは、生産や調達、品目計画の視点から企業を細分化したロジスティクス上の組織単位で、こちらも1つの会社コードにのみ割り当てられます。\n販売組織やプラントは会社コード単位でのみ使用可能です。\n例えば、事業領域は「会社全体の中の分野ごとの部門」、販売組織は「その会社の中で商品を売る1つのチーム」のようにイメージするとわかりやすいです。",
        
        },

        # 問題 10
        {
            "question": "SAP S/4HANA では、唯一の正しい情報源を表すユニバーサルジャーナル (テーブル ACDOCA) が導入されました。テーブル ACDOCA にはどの明細が記録されていますか。 （３つ選択）",
            "choices": ["会社間転記", "付替によって発生する一次原価", "配賦によって発生する二次原価", "原価センタの予算原価", "計画償却額"],
            "answer": ["会社間転記", "付替によって発生する一次原価", "配賦によって発生する二次原価"],
            "explanation":"S/4HANA では、さまざまなデータはそれぞれ決まったテーブルに格納されます。\n例えば、原価センタの予算データは「ACDOCP」というテーブルに保存され、固定資産管理の計画償却データは「FAAT_PLAN_VALUES」に保存されます。他の実績明細データはすべて「ACDOCA」というテーブルにまとめて保存されます。\nこのように、データの種類ごとに格納場所が決まっていることで、必要な情報を効率よく取り出すことができます。",
        
        },
        # 問題 11
        {
            "question": "SAP S/4HANA システムで、どの会社コードでも使用されなくなった業務の G/L勘定をアーカイブする必要があります。 G/L勘定のすべてのデータをアーカイブするための前提条件は、次のうちどれですか。 （３つ選択）",
            "choices": [
             "勘定が自動勘定設定で使用されない。",
             "勘定に取引金額が存在しない。",
             "G/L勘定の勘定コード表データに削除フラグを設定する。",
             "取引金額が、カスタマイズ可能な年数よりも古い。",
             "G/L勘定の会社コードデータに削除フラグを設定する。"
            ],
            "answer": [
             "勘定に取引金額が存在しない。",
             "G/L勘定の勘定コード表データに削除フラグを設定する。",
             "G/L勘定の会社コードデータに削除フラグを設定する。"
            ],
            "explanation":"G/L勘定マスタをアーカイブする場合は、まずその勘定に関する取引データを先にアーカイブしておく必要があります。\nアーカイブするための要件は次の通りです。\n一つ目は、勘定コード表レベルのデータです。削除フラグが設定されており、会社コード固有のデータや依存する原価要素がない状態である必要があります。\n二つ目は、会社コードレベルのデータです。こちらも削除フラグが設定されており、取引金額がなく、転記済伝票（未消込明細・消込済明細の両方）が存在しないことが条件です。\n例えば、過去の使用が終了した勘定を整理する場合、これらの条件を満たしてからアーカイブすることで、安全にデータを整理・保管できます。",
        
        },

        # 問題 12
        {
            "question": "以下のうち、特定の元帳に対して定義できる通貨タイプはどれですか。 （３つ選択）",
            "choices": [
             "00 = 伝票通貨",
             "10 = 会社コード通貨",
             "30 = グループ通貨",
             "40 = ハード通貨",
             "60 = グローバル会社通貨"
         ],
            "answer": [
             "30 = グループ通貨",
             "40 = ハード通貨",
             "60 = グローバル会社通貨"
         ],
            "explanation":"システムで提供される標準通貨タイプは、次の通りです。\n一つ目は、00 伝票通貨です。\n二つ目は、10 会社コード通貨です。\n三つ目は、20 管理領域通貨です。\n四つ目は、30 グループ通貨です。\n五つ目は、40 ハード通貨です。\n六つ目は、50 インデックス基準通貨です。\n七つ目は、60 グローバル会社通貨です。\n八つ目は、70 CO 対象通貨です。\nこれらの通貨タイプのうち、デフォルトで選択されている00（伝票通貨）と10（会社コード通貨）に加えて、どの通貨を更新するかを会社コードの元帳で定義します。\n要するに、会社が複数の国で事業を行っている場合、標準通貨タイプだけでなく、特定の地域向けに独自の通貨タイプを設定することも可能です。",
        
        },

        # 問題 13
        {
            "question": "財務会計で代入を定義します。代入の各ステップに対して、次のどのパーツを定義する必要がありますか。 （２つ選択）",
            "choices": [
                "代入値",
                "前提条件",
                "呼び出し位置",
                "チェック明細"
            ],
            "answer": [
                "代入値",
                "前提条件"
            ],
            "explanation":"代入は、次の2つの要素で構成されます。\n一つ目は「前提条件」です。\n二つ目は「代入（値）」です。\n代入を登録する際には、正しい「呼出位置」を選択する必要があります。\nただし、「呼出位置」は代入の構成要素には含まれません。\nようするに、ある条件が満たされた場合に特定の値を代入したいとき、前提条件にその条件を設定し、代入（値）に割り当てたい値を指定します。",
        
        },

        # 問題 14
        {
            "question": "機能領域はどのレベルで定義しますか。",
            "choices": [
                "管理領域",
                "クライアント",
                "会社コード",
                "財務諸表バージョン"
            ],
            "answer": "クライアント",
            "explanation":"機能領域は、会社の中の「どの部門・仕事に費用がかかったか」を管理するための単位です。\n売上原価会計では、費用がどの機能領域に属するかで間接費の集計やレポートが行われます。\n勘定コードマスタに機能領域を設定しておくと、その勘定に関するすべての取引は自動的に設定した機能領域に割り当てられます。\nさらに、機能領域は原価センタや内部指図など、他の費用管理対象にも割り当てることができます。\n例えば、「販売部門」の費用を管理したい場合、販売部門を機能領域として設定すると、販売に関わる間接費が自動的に販売部門に集計されるイメージです。",
        
        }
    ],

    "トピック 2: 総勘定元帳": [
        # 問題 15
        {
            "question": "伝票の入力ビューで、総勘定元帳ビューよりも明細の数が少ないことに気付きました。どのような理由が考えられますか。",
            "choices": [
                "追加加元帳が設定されている。",
                "売上税が総勘定元帳ビューの詳細に転記されている。",
                "補助元帳勘定が総勘定元帳ビューの詳細に表示されている。",
                "伝票分割が有効化されている。"
            ],
            "answer": "伝票分割が有効化されている。",
            "explanation": "財務会計 (FI) 伝票には、2つの見え方（ビュー）があります。\n一つ目は「入力ビュー」です。これは伝票を登録する人が画面上でどう見えるかを示すもので、入力した項目がそのまま表示されます。\n二つ目は「総勘定元帳ビュー」です。こちらは総勘定元帳（リーディング元帳や非リーディング元帳）で伝票がどう表示されるかを示します。\n伝票分割が行われると、総勘定元帳ビューでは分割後の明細が表示されますが、入力ビューでは分割前の明細しか表示されません。そのため、入力ビューでは総勘定元帳ビューよりも明細の数が少なく見えることがあります。",
        },

        # 問題 16
        {
            "question": "会社コードの一般仕訳を転記しています。エントリを転記した後、伝票番号が誤った番号範囲にあることに気付きました。伝票を反対仕訳した後、伝票の再転記時に何を変更する必要がありますか。",
            "choices": ["伝票タイプ", "転記キー", "ソートキー", "伝票番号"],
            "answer": "伝票タイプ",
            "explanation":"伝票番号範囲とは、伝票に割り当てる番号の範囲を決める仕組みです。\n伝票タイプごとに番号範囲を設定することで、その伝票タイプで登録した会計伝票の番号がどの範囲で付与されるかが決まります。\nもし「伝票番号が間違った番号範囲にある」場合は、伝票タイプが誤っていた可能性があります。この場合の訂正方法は、まずその伝票を反対仕訳で取り消し、正しい伝票タイプで再度転記することになります。番号範囲エラー＝伝票タイプを確認。",
        },

        # 問題 17
        {
            "question": "税計算表を設定する必要があります。定義する必要のある主な要素は何ですか。(3つ選択)",
            "choices": ["勘定キー", "税コード", "ステップ順序", "税カテゴリ", "条件タイプ"],
            "answer": ["勘定キー", "ステップ順序", "条件タイプ"],
            "explanation":"税計算表は、税金を計算するためのルール表で、以下の3つの要素から成り立っています。\n一つ目は、一連の順序です。税を計算するステップの順番を決めます。開始ステップは、どのタイミングで基準となる金額を取得するかを示します。例えば、スーパーで買い物をするとき、まず商品の合計金額を出してから消費税をかける流れがこれにあたります。\n二つ目は、税タイプ（条件タイプ）です。国や地域ごとの税の種類を表します。例えば、日本なら消費税、アメリカなら州ごとの売上税のように、地域ごとに異なる税をここで指定します。\n三つ目は、勘定キー（内部処理キー）です。税を正しく会計に反映させるための内部用のキーで、自動で勘定に振り分けるときに使われます。例えば家計簿アプリで「食費」「日用品」「光熱費」とカテゴリ分けして自動で合計を出すイメージです。SAP S/4HANA ではあらかじめ標準の勘定キーが用意されており、基本的にはこの標準キーを使うのが推奨です。税計算表＝勘定キー＋ステップ順序＋条件タイプ。",
        },

        # 問題 18
        {
            "question": "リーディング元帳が他のパラレル標準元帳と異なる点は何ですか。",
            "choices": [
                "すべての会社コードに割り当てられている。",
                "他の元帳から金額が導出できない。",
                "グループ評価を表すために使用される。",
                "セグメントレポートの実行に使用される。"
            ],
            "answer": "すべての会社コードに割り当てられている。",
            "explanation":"◆ リーディング元帳には、すべての会社コードが自動的に割り当てられるため、個別に無効化することはできません。\n◆ 非リーディング元帳（パラレル標準元帳）は、必要に応じて会社コードごとに手動で有効化する必要があります。例えば、複数の財布を持っていて、普段はメインの財布だけ使うけれど、旅行や特別な買い物のときだけサブの財布を開けて使うイメージです。",
        },

        # 問題 19
        {
            "question": "二つの通貨間の外貨換算比率はどのレベルで更新しますか",
            "choices": ["評価タイプ", "換算レートタイプ", "伝票タイプ", "通貨タイプ"],
            "answer": "換算レートタイプ",
            "explanation":"◆ 2つの通貨間の外貨換算比率（換算レート）は、換算レートタイプと有効開始日付ごとに設定します。\n◆ 換算レートタイプは、例えば評価用、換算用、計画用など、用途ごとに分けて定義できます。多くの場合、換算レートタイプ M がデフォルトで使われます。例えば、海外旅行で日本円をドルに換えるときに「観光用レート」と「銀行用レート」を分けて用意しているイメージです。",
        },

        # 問題 20
        {
            "question": "自動消込プログラムによって消し込まれない明細は次のうちどれですか(３つ選択)",
            "choices": [
                "消費税のある明細",
                "統計転記",
                "売上税と使用税のある明細",
                "源泉徴収税のある明細",
                "備忘明細"
            ],
            "answer": ["統計転記", "源泉徴収税のある明細", "備忘明細"],
            "explanation":"◆ 自動消込プログラムでは、次の明細は自動で消し込まれません。\n(1) 備忘明細\n(2) 統計転記や、手形に関する特殊な仕訳取引\n(3) 前受金や前払金（ただし、同じ金額の前受/前払金明細が既に転記されている場合のみ消し込めます）\n(4) 源泉徴収税が入力された明細\n例えば、スーパーで買い物した時に「ポイントは現金と一緒には引けない」ようなイメージで、条件が揃わないと自動で相殺されない明細があると考えるとわかりやすいです。",
        },
        
        # 問題 21
        {
            "question_number": 21,
            "question": "G/L勘定に対して明細消込管理を無効化するための前提条件はなんですか。",
            "choices": [
                "転記されていない",
                "貸借が一致する",
                "転記に対してブロックされている",
                "未消込明細がない"
            ],
            "answer": "貸借が一致する",
            "explanation":"◆ 明細消込管理は、特定の取引が相殺されているかどうかを確認するための仕組みです。\n未消込の明細と消込済の明細を別々に確認できるため、どの取引を消込する必要があるかを簡単に見分けられます。\n明細消込管理は、以下のような貸借対照表勘定で使われます。\n(1) 銀行仮勘定\n(2) 入庫や請求書受領の消込勘定\n(3) 給与消込勘定\n例えば、クレジットカードの支払いで「まだ決済されていないもの」と「すでに決済済のもの」を分けて管理するようなイメージです。\nなお、明細消込管理をオン/オフできるのは、勘定の借方と貸方の金額が一致している場合だけです。",
        },

        # 問題 22
        {
            "question_number": 22,
            "question": "代替勘定を G/L 勘定に割り当てようとしていますが、エラーメッセージが表示されます。どのような理由が考えられますか。",
            "choices": [
                "代替勘定コード表を会社に割り当てていない。",
                "会社コードに対して代替勘定が登録されていない。",
                "代替勘定が、会社コードの別のG/L 勘定にすでに割り当てられている。",
                "代替勘定コード表を運用勘定コード表に割り当てていない。"
            ],
            "answer": "代替勘定が、会社コードの別のG/L 勘定にすでに割り当てられている。",
            "explanation":"◆ 外部レポート用に特別な勘定コード表が必要な会社コードでは、代替勘定コードを使うことができます。\n(1) まず、会社コードに代替勘定コード表を割り当てます。\n(2) 次に、G/L勘定の会社コードレベルで、その代替勘定コード表の勘定コードを入力します。ただし、この勘定コードは1度しか割り当てられません。\n例えば、会社Aが税務申告用に特別な勘定番号を使う必要がある場合、その会社コードに代替勘定コード表を設定し、該当する勘定に1回だけ特別番号を登録して外部レポート用に管理する、というイメージです。",
        },

        # 問題 23
        {
            "question_number": 23,
            "question": "G/L 勘定を登録しようとしていますが、勘定コードが許容範囲外であるため、エラーが発生します。番号範囲を拡張するには、どのオブジェクトをカスタマイズする必要がありますか。",
            "choices": [
                "許容範囲グループ",
                "勘定タイプ",
                "勘定グループ",
                "勘定コード表"
            ],
            "answer": "勘定グループ",
            "explanation":"◆ 勘定コード表にはいろいろな種類の勘定が含まれていて、それぞれを勘定グループに割り当てることができます。\n◆ 勘定グループには番号範囲が設定されており、同じ種類の勘定はその範囲内で登録できます。番号範囲は重複させることも可能です。\n例えば、会社の「現金勘定」と「預金勘定」を別の勘定グループに入れ、それぞれに10～19や20～29の番号範囲を設定することで、同じ種類の勘定を整理しやすくなるイメージです。",
        },

        # 問題 24
        {
            "question_number": 24,
            "question": "グループ勘定コード表はどこで割り当てますか",
            "choices": [
                "会社コード",
                "会社",
                "G/L勘定",
                "運用勘定コード表"
            ],
            "answer": "運用勘定コード表",
            "explanation":"◆ 企業グループでは、複数の会社の会計データをまとめて「連結財務諸表」を作る必要があります。このときに便利なのが「グループ勘定コード表」です。\n◆ 設定の手順はこうなります。\n(1) まず、まとめたい勘定（例えば現金、売掛金など）をすべて入れた「グループ勘定コード表」を作ります。\n(2) その表を運用中の勘定コード表に割り当てます。こうすると、G/L勘定（会社ごとの勘定）にグループ勘定コードの入力欄が必須になります。\n(3) 各G/L勘定に、どのグループ勘定に属するかのコードを入力します。1つのグループ勘定を複数のG/L勘定で共有できます。\n(4) 連結財務諸表用のバージョンを作り、グループ勘定を反映できるようにします。\n例えば、A社とB社の売掛金をまとめて「グループ売掛金」と設定しておくと、グループ全体の売掛金がすぐに集計でき、管理がラクになります。",
        },

        # 問題 25
        {
            "question_number": 25,
            "question": "G/L 勘定の勘定コード表レベルで更新される項目はどれですか(3つ選択)",
            "choices": [
                "グループ勘定コード",
                "項目ステータスグループ",
                "テキスト(短)",
                "代替勘定コード",
                "勘定グループ"
            ],
            "answer": ["グループ勘定コード", "テキスト(短)", "勘定グループ"],
            "explanation":"◆ G/L勘定の「勘定コード表レベル」には、主に次の項目があります。\n(1) 制御データ ⇒ G/L勘定の種類（例えば資産や負債）や、勘定をまとめるグループ（勘定グループ）を設定します。\n(2) テキスト ⇒ 勘定名を入力する欄で、「短いテキスト」と「長いテキスト」の2種類があります。短い名前は帳票などに表示、長い名前は詳細説明に使います。\n(3) 連結データ ⇒ グループ全体で集計するための「グループ勘定コード」を設定します。\n例えば、現金勘定の場合、制御データで資産勘定に分類し、テキストで「現金」と入力し、連結データで「グループ現金」に割り当てる、といった形です。",
        },

        # 問題 26
        {
            "question_number": 26,
            "question": "G/L 勘定を新規会社コードに拡張しようとしていますが、データが不完全でエラーが発生します。カスタマイズ可能な全ての項目が、項目ステータスで任意入力に設定されています。G/L勘定の拡張時に常に更新する必要がある項目はどれですか。(2つ選択)",
            "choices": [
                "勘定通貨",
                "項目ステータスグループ",
                "ソートキー",
                "勘定コード"
            ],
            "answer": ["勘定通貨", "項目ステータスグループ"],
            "explanation":"◆ G/L勘定のマスタデータでは、「項目ステータス」を使って、各項目の表示や入力のルールを決めることができます。設定できるステータスは次の4種類です。\n(1) 非表示 ⇒ その項目は画面に表示されず、使わない項目です。\n(2) 表示のみ ⇒ 項目は見えるが、値を変更することはできません。\n(3) 必須入力 ⇒ 値を必ず入力しなければならない項目です。\n(4) 任意入力 ⇒ 値を入力してもいいですが、必須ではありません。\nさらに、項目をグループ化して、まとめて同じステータスを設定することも可能です。ただし、「勘定通貨項目」と「項目ステータスグループ項目」は常に必須入力となっており、ステータスを変更することはできません。\n例えば、現金勘定で「銀行名」を任意入力、「口座番号」を必須入力に設定する、といった使い方ができます。",
        },

        # 問題 27
        {
            "question_number": 27,
            "question": "伝票分割の設定を担当しています。重要な設定は何ですか(二つ選択)",
            "choices": [
                "取引バリアント",
                "伝票タイプ",
                "伝票番号範囲",
                "項目ステータスバリアント"
            ],
            "answer": ["取引バリアント", "伝票タイプ"],
            "explanation":"◆ 伝票タイプに対して、どのような会計処理をするかを決める「取引（会計トランザクション）」と、その取引をより具体的にモデル化した「取引バリアント（会計トランザクションバリアント）」を割り当てることで、伝票を自動で分割する仕組みが動きます。\n取引（会計トランザクション）は、たとえば「売上」「仕入」「支払」などの一般的なビジネス処理の分類です。それぞれの取引には、どの種類の明細（勘定、原価センタなど）を使うかが決まっています。\n取引バリアントは、取引の具体的な処理方法を定義したもので、技術的には伝票分割のルールをモデル化しています。\nたとえば「売上伝票を受注伝票と請求伝票に分けて処理する」といった具体的な処理手順を指定するイメージです。",
        },

        # 問題 28
        {
            "question_number": 28,
            "question": "新しい標準元帳を定義するときに、一般仕訳をマニュアルで転記するには、以下のどのアクションを実行する必要がありますか。",
            "choices": [
                "元帳に会社コードを割り当てる",
                "基本元帳を定義する",
                "勘定コード表を元帳に割り当てる",
                "元帳グループに元帳を含める"
            ],
            "answer": "元帳に会社コードを割り当てる",
            "explanation":"◆ リーディング元帳と非リーディング元帳はまとめて「標準元帳」と呼ばれます。リーディング元帳はすべての会社コードに自動で割り当てられますが、非リーディング元帳はリーディング元帳と同じ種類の元帳で、会社コードごとに手動で有効化（割り当て）する必要があります。\n例えば、リーディング元帳は会社全体のメインノートのようなもので、非リーディング元帳は部門ごとに必要に応じて作るサブノートのイメージです。\n新しい元帳を登録すると、自動的に同じ名前の元帳グループも作られます。伝票を登録する際に元帳グループを指定しなかった場合でも、すべての元帳に自動的に伝票が転記される仕組みになっています。",
        },

        # 問題 29
        {
            "question_number": 29,
            "question": "損益計算書 (P&L) に値が表示されるのは、どの G/L勘定タイプですか。(3つ選択)",
            "choices": [
                "営業外費用または収入",
                "二次原価",
                "一次原価または収益",
                "貸借対照表勘定",
                "現金勘定"
            ],
            "answer": ["営業外費用または収入", "二次原価", "一次原価または収益"],
            "explanation":"◆ G/L 勘定は、会社の会計情報を記録するための「勘定の種類」に分けられます。主なタイプは以下のとおりです。\n(1) 貸借対照表勘定：会社の資産や負債、資本を記録する勘定で、年度末に残高が翌年に繰り越されます。例えば、会社の現金や借入金の残高を管理する口座です。\n(2) 現金勘定（銀行統制勘定）：複数の銀行口座に割り当てられる貸借対照表勘定です。各取引銀行口座に対して支払処理用の G/L 勘定が必要ですが、現金勘定を使えば勘定の数を減らせます。身近な例としては、会社の給与振込や請求支払いをまとめて管理する「メインの銀行口座ノート」のようなものです。\n(3) 営業外費用または収入：会社の本業以外から発生した費用や利益を記録する損益計算書勘定です。例えば、投資で得た利益や罰金などが該当します。\n(4) 一次原価または収益：給与や販売費、管理費など、会社の日常営業活動から発生する費用や収益を記録する損益計算書勘定です。身近な例だと、社員の給料や事務用品の購入費です。\n(5) 二次原価：会社内部の活動や配分から発生する費用を記録する損益計算書勘定です。例えば、社内での部門間のコスト配分や設備利用料の振替などが該当します。",
        },

        # 問題 30
        {
            "question_number": 30,
            "question": "会計年度バリアントは何を定義しますか(二つ選択)",
            "choices": [
                "会計期間の開始日付と終了日付",
                "会計期間数",
                "転記可能な会計期間",
                "特別会計期間への転記権限",
            ],
            "answer": ["会計期間の開始日付と終了日付", "会計期間数"],
            "explanation":"◆ 会計年度は、基本的に年度に依存せず設定できます。年度非依存の会計年度バリアントには2種類あります。\n(1) カレンダ年：1月1日から12月31日までを1年とするタイプです。この場合、会計期間は1年を12か月に分けた12の会計期間で構成されます。たとえば、会社の給与や経費を毎月まとめるイメージです。\n(2) 非カレンダ年：会計年度が1月1日から始まらない場合の設定です。この場合、各会計期間は終了日で区切られ、前の会計期間の翌日が次の会計期間の開始日となります。非カレンダ年は1～16の会計期間に分けられます。もし開始日が1月1日でない場合、前または翌会計年度にまたがる期間には「-1」や「+1」のフラグを設定します。たとえば、4月1日スタートの年度では、3月分が翌年度にまたがる場合があるイメージです。\n◆ 「転記可能な会計期間」や「特別会計期間への転記権限」は、この会計期間バリアントで管理されます。",
        },

        # 問題 31
        {
            "question_number": 31,
            "question": "通貨タイプはどこで割り当てますか",
            "choices": [
                "会社",
                "評価領域",
                "会計原則",
                "元帳",
            ],
            "answer": "元帳",
            "explanation":"◆ 会社コードに割り当てられている元帳では、会社コード通貨だけでなく、他の通貨タイプも追加で割り当てることができます。これを設定すると、複数通貨での管理（パラレル通貨）が可能になります。\nたとえば、日本円を基本通貨にしつつ、米ドルやユーロでも帳簿を管理できるイメージです。\n◆ また、標準システムで用意されている通貨タイプとは異なる通貨を使いたい場合は、独自の通貨タイプを設定することもできます。",
            
        },

        # 問題 32
        {
            "question_number": 32,
            "question": "クローズされた会計期間に転記された伝票の反対仕訳を転記しようとしています。オリジナル伝票とは異なる日付で反対仕訳を入力できるようにするには、どのオブジェクトを設定しますか。",
            "choices": [
                "会社コード",
                "反対仕訳方法",
                "伝票タイプ",
                "反対仕訳理由"
            ],
            "answer": "反対仕訳理由",
            "explanation":"◆ 伝票を取り消す（反対仕訳）ときには、なぜ反対仕訳を行うのかを示す「反対仕訳理由」を入力する必要があります。たとえば、誤って登録した伝票を訂正する場合などです。\n◆ さらに、「代替転記日」という設定を使うと、元の伝票日付とは別の日付で反対仕訳を記録することができます。\nたとえば、先月の伝票を今月の帳簿に反映させたい場合などに使います。",
            
        },

        # 問題 33
        {
            "question_number": 33,
            "question": "15の法人組織で構成される企業グループの連結財務レポートを準備します。SAP S/4HANA システムで1つのクライアントに10の会社コードが定義されています。その他については、個別のレガシーシステムが使用されます。連結シナリオに対応するには、SAP S/4HANAシステムでいくつの会社を定義する必要がありますか。",
            "choices": [
                "15",
                "5",
                "10",
                "1"
            ],
            "answer": "15",
            "explanation":"◆ 会社（会社 ID）は、グループ全体の連結会計を準備するために使われます。\nたとえば、あるグループに子会社が400社あったとしても、SAP S/4HANA 上で会社コードが定義されているのが100社だけなら、システムには100の会社コードと400の会社 ID の両方を登録する必要があります。\n◆ 各会社 ID は、システム全体でグループの整合性を保つために必要で、すべての会社コードには必ず独自の会社 ID が割り当てられます。\n◆ 参加会社や関連会社（パートナ会社）の会社 ID は、これらの会社が補助元帳勘定として設定されている場合、得意先や仕入先のビジネスパートナに割り当てる必要があります。さらに、G/L 勘定で会社 ID を直接使って管理することも可能です。。",

        }  
    ],

    "トピック 3: 債務管理および債権管理": [    
        # 問題 34
        {   "question_number": 34,
            "question": "得意先未消込明細を消し込みましたが、 このアクションを取り消そうとしています。 利用可能なオプションは何ですか。(2つ選択)",
            "choices": ["消込伝票の反対仕訳", "消込伝票のリセット", "消込伝票のリセットおよび反対仕訳", "消込伝票の再転記"],
            "answer": ["消込伝票のリセット", "消込伝票のリセットおよび反対仕訳"],
            "explanation":"◆ 消込伝票の取消しは、個別の反対仕訳や一括反対仕訳ではなく、「消込済明細再登録」を使って行います。\n◆ 消込済明細再登録には実行時に選べる2つのオプションがあります。\n(1) 消込伝票によって消込された明細をすべて未消込に戻す。\n(2) 上記の処理に加えて、消込伝票自体に対する反対仕訳も行う。。",

        },

        # 問題 35
        {   "question_number": 35,
            "question": "SAP S/4HANA における備忘明細のコンセプトについて説明する必要があります。 備忘明細に固有の特性はどれですか。(3つ選択)",
            "choices": ["支払プログラムと督促プログラムによってアクセスすることができる。","入力ビューでのみ総勘定元帳を更新する。","貸借が一致しない転記を生成する。","得意先コードおよび仕入先コードの未消込明細として管理される。","統計転記を生成する。"],
            "answer": ["支払プログラムと督促プログラムによってアクセスすることができる。","貸借が一致しない転記を生成する。","得意先コードおよび仕入先コードの未消込明細として管理される。"],
            "explanation":"◆ 備忘明細は、ユーザが支払予定や情報を確認するために使う特殊な伝票明細です。実際の支払には影響せず、総勘定元帳にも金額は反映されません。\n例えば、「今月中にこの請求書が来る予定だよ」と通知する付箋のようなイメージです。\n\n◆ 備忘明細の特徴は以下のとおりです。\n(1) 登録すると1件の伝票明細だけが作られ、相手勘定の入力は不要なので貸借一致チェックは行われません。\n(2) 総勘定元帳では取引金額は更新されません。\n(3) 登録した備忘明細は、支払プログラムや督促プログラムで後から処理できます。\n(4) 備忘明細は、得意先勘定や仕入先勘定の未消込明細として管理されます。",
            
        },

        # 問題 36
        {   "question_number": 36,
            "question": "債権管理では理由コードを使用して何を制御しますか(3つ選択)",
            "choices": ["前受/前払金の特殊仕訳コード","残余明細が転記される勘定","得意先に送付される支払通知のタイプ","クレームを受けた残余明細を与信限度チェックから除外","支払の伝票番号"],
            "answer": ["残余明細が転記される勘定","得意先に送付される支払通知のタイプ","クレームを受けた残余明細を与信限度チェックから除外"],
            "explanation":"◆ 理由コードは、支払差額が発生したときに「なぜ差額が出たのか」を管理して、後から分析や処理を行うための仕組みです。\n例えば、請求額と実際の支払額が少し違ったときに、「送料の誤差」「割引反映漏れ」など理由を記録できます。\n\n◆ 理由コードには、以下の便利な追加機能もあります。\n(1) 得意先に送る支払通知などの文書タイプを制御できる。\n(2) 残った金額（残余明細）が転記される勘定を制御できる。\n(3) 指定した G/L 勘定に残余明細を自動で仕訳できる。\n(4) クレーム処理中の残余明細を与信限度チェックから除外できる。",
            
        },

        # 問題 37
        {   "question_number": 37,
            "question": "3方向照合は、S/4HANA で調達取引を転記するために使用される標準手順です。 どのように動作しますか。",
            "choices": ["転記日付","入庫日付","入力日付","起算日","伝票日付"],
            "answer": ["転記日付","入力日付","伝票日付"],
            "explanation":"3方向照合（購買発注・入庫・請求書）では、転記日付、入力日付、伝票日付を基準に照合が行われます。\n◆ 支払条件で「支払基準日」の初期値として設定できる日付には、伝票日付、転記日付、入力日付の3種類があります。例えば、請求書の日付を基準に支払日を決めたい場合は「伝票日付」を選びます。\n◆ また、「初期値なし」を選ぶこともでき、その場合は毎回支払基準日を手入力で指定する必要があります。\n日付管理は財務・在庫・購買の連携において重要です。",
        },

        # 問題 38
        {   "question_number": 38,
            "question": "得意先の前受金が販売管理（SD）で処理される過程を的確に説明している文は次のどれですか。",
            "choices": ["入庫は、購買発注を参照して登録する必要がある。","購買発注は、購買依頼を参照して登録する必要がある。","3つのロジスティクスステップごとに財務伝票が生成される。","請求書は、入庫を参照して登録する必要がある。"],
            "answer": "入庫は、購買発注を参照して登録する必要がある。",
            "explanation":"入庫は購買発注を参照して登録する必要があります。\nこれにより、財務会計で適切な仕訳が作成され、在庫・債権が連動します。入庫と購買発注のリンクが財務転記に必須です。",
            
        },
        # 問題 39
        {   "question_number": 39,
            "question": "支払方法を定義します。 会社コードのレベルではどのパラメータを定義しますか。(2つ選択)",
            "choices": ["支払媒体" ,"使用可能通貨" ,"最低支払額と最高支払額" ,"外貨支払可能"],
            "answer": ["最低支払額と最高支払額" ," 外貨支払可能"],
            "explanation":"支払方法設定では会社コードごとの制約を設定できます。\n最低支払額や最高支払額、外貨支払可否は会社コードレベルで管理されます。",
            
        },

        # 問題 40
        {   "question_number": 40,
            "question": "得意先との間で金額 EUR 10000 の保証について同意しました。この保証を SAP S/4HANA に記録すると、 どのような結果になりますか。",
            "choices": ["2つの備忘明細" ," 1つの統計明細" ," 2つの統計明細" ," 1つの備忘明細"],
            "answer": "2つの統計明細",
            "explanation":"◆ 支払保証の転記などで使われる特殊仕訳は「自動相手勘定入力」と呼ばれ、いつも同じ相手勘定コードに転記されます。\n例えば、「保証債務」という勘定の相手勘定は常に「保証債務見返」です。\n\n◆ こうした取引は財務諸表の注記用にだけ表示されるため「統計転記」と呼ばれ、この取引で作られる2件の明細は「統計明細」と呼ばれます。例えば、銀行に提出する財務諸表にだけ現れる金額です。",
            
        },

        # 問題 41
        {   "question_number": 41,
            "question": "ビジネスパートナーマスタレコードで更新する督促関連データは何ですか(2つ選択)",
            "choices": ["督促保留" ," 督促領域" ," 督促間隔日数" ," 督促キー"],
            "answer": ["督促保留" ," 督促領域"],
            "explanation":"◆ 得意先マスタの連絡文書タブ画面では、「督促処理」と「督促保留」を更新することができます。例えば、支払いが遅れている得意先に督促状を出す場合、この画面で処理状況を記録します。\n◆ 「督促領域」はオプション機能ですが、「督促領域」ボタンを押すと別画面が開き、そこから督促領域を更新することができます。\n例えば、複数の部署や地域ごとに督促設定を変えたいときに使います。",
        },

        # 問題 42
        {   "question_number": 42,
            "question": "支払差額の残余明細を使用して、得意先からの入金を転記します。結果はどのようになりますか。(2つ選択)",
            "choices": ["残余明細が原価勘定に欠損処理される。" ,"元の未消込明細と残余明細の両方が、 未消込明細として勘定に残る。" ,"残余明細が新規売掛金になる。" ,"元の伝票と入金が消し込まれる。"],
            "answer": ["残余明細が新規売掛金になる。" ,"元の伝票と入金が消し込まれる。"],
            "explanation":"支払差額を残余明細として転記すると、元伝票は入金と消し込まれ、差額分は新しい未消込明細として売掛金に残ります。残余明細は新規未消込明細として扱われます。\n得意先からの入金で、請求額と入金額に差がある場合、許容限度を超える差額は自動で処理されないため、手動で対応する必要があります。\n例えば、請求が100,000円なのに90,000円しか入金されなかった場合や、逆に110,000円入金された場合です。\n◆ 支払差額の処理方法には次のオプションがあります。\n(1) 支払差額を一部入金として転記 ⇒ すべての伝票は未消込明細として残ります。例えば、100,000円請求に対して90,000円入金された場合、10,000円の差額が未消込として残ります。\n(2) 支払差額を残余明細として転記 ⇒ 元の伝票と入金は消し込まれ、超過または不足分は新しい売掛金として登録されます。\n例えば、100,000円請求に対して110,000円入金された場合、余分な10,000円が新規売掛金として扱われます。\n(3) 支払差額を他の勘定に転記 ⇒ 理由コードと自動勘定設定を使います。例えば、誤入金を調整用の勘定に振り替える場合です。\n(4) 支払差額を費用化 ⇒ マニュアルで勘定を割り当てます。例えば、少額の差額を雑損失として処理する場合です。\n",
            
        },

        # 問題 43
        {   "question_number": 43,
            "question": "標準販売プロセスにおいて、 COGS (cost of goods sold) 転記が財務会計で生成されるのはいつですか。",
            "choices": ["PGI 実行(出庫転記)" ,"得意先請求書の発行" ,"請求伝票の登録" ,"出荷伝票の登録"],
            "answer": "PGI 実行(出庫転記)",
            "explanation":"◆ 標準の販売取引には、以下の 3 つのフェーズがあります。\n\n(1) 受注 ⇒ 受注は販売取引の基礎で、得意先が発注した後に登録します。受注は販売伝票として扱われ、FI での転記は行われません。例えば、得意先が10個の商品を注文した場合、その内容を受注伝票に登録します。\n(2) 出荷 ⇒ 出荷伝票は出荷日付で登録され、商品を在庫から払い出して出庫として転記 (PGI: Post Goods issue) した後に請求が可能です。出庫伝票は MM で登録され、FI で会計伝票が作成されます。会計伝票では、売上原価勘定 (COGS) が借方に、在庫勘定が貸方に記入されます。\n例えば、倉庫から商品を送り出すと同時に在庫が減少し、売上原価が計上されます。\n(3) 請求 ⇒ 請求は販売取引の最後のフェーズで、請求伝票が生成され、請求書が得意先に送付されます。これと同時に会計伝票が生成され、得意先勘定が借方、収益勘定が貸方に記入されます。\n例えば、10個の商品を出荷した後、請求書を作成して顧客に送付すると、売上が会計上記録されます。",
        },

        # 問題 44
        {   "question_number": 44,
            "question": "督促レベルで設定できるパラメータはどれですか。(2つ選択)",
            "choices": ["延滞日数" ,"金利フラグ" ,"支払期日までの日数" ,"明細毎猶予日数"],
            "answer": ["延滞日数" ,"支払期日までの日数"],
            "explanation":"督促レベルでは、延滞日数や支払期日までの日数を基準に判定や通知タイミングを制御します。日数設定により督促の自動化が可能です。",
            
        },


        # 問題 45
        {   "question_number": 45,
            "question": "支払が必要な請求書の入力時には、どの日付が設定される必要がありますか",
            "choices": ["参照日付" ,"支払日" ,"支払基準日" ,"受注日付"],
            "answer": "支払基準日",
            "explanation":"支払予定の決定には支払基準日が重要です。請求書入力時、この日付が基準となって支払スケジュールが作成されます。\n\n支払計算の基準日を理解することがポイントです。",
            
        },

        # 問題 46
        {   "question_number": 46,
            "question": "SAP S/4HANA システムにおける督促処理の3つの必須ステップは何ですか。(3つ選択)",
            "choices": ["督促処理実行をスケジュールする" ,"督促提案を承認する" ,"督促提案を変更する" ,"督促プログラムのパラメータを更新する" ,"督促状印刷を開始する"],
            "answer": ["督促処理実行をスケジュールする","督促プログラムのパラメータを更新する","督促状印刷を開始する"],
            "explanation":"督促処理は、\n①パラメータ設定、\n②処理実行、\n③督促状印刷  の3ステップが必要です。\n承認や変更は任意であり必須ではありません。\nステップ順序と必須処理を把握することが重要です。",
            
        },


        # 問題 47
        {   "question_number": 47,
            "question": "財務会計でクレジットメモを入力しようとしていますが、 入力した支払条件が無視される理由が不明です。 その理由は何ですか。(2つ選択)",
            "choices": ["入力された支払条件に基づいて決定された期日が過去の日付です。" ,"クレジットメモの「参照」項目が空白になっている。" ,"クレジットメモが請求書を参照せずに登録された。" ,"クレジットメモが財務会計に入力された。"],
            "answer": ["クレジットメモの「参照」項目が空白になっている。" ,"クレジットメモが請求書を参照せずに登録された。"],
            "explanation":"クレジットメモの参照項目が空白、もしくは請求書を参照せずに登録されると支払条件が無視されます。\nクレジットメモは必ず参照伝票が必要です。",
        },

        # 問題 48
        {   "question_number": 48,
            "question": "連絡文書タイプに対して、次のどのレベルで印刷プログラムおよびそのバリアントを割り当てることができますか。(2つ選択)",
            "choices": ["会社コード" ,"システム" ,"クライアント" ,"会社"],
            "answer": ["会社コード","クライアント"],
            "explanation":"印刷プログラムとバリアントはクライアント全体および会社コード単位で割り当て可能です。\n文書タイプ設定はスコープ（クライアント／会社コード）を意識します。",
            
        },

        # 問題 49
        {   "question_number": 49,
            "question": "新しい連絡文書タイプの設定時に指定できるパラメータは次のどれですか。(3つ選択)",
            "choices": ["必要な日付項目の数" ,"必須の会社コード" ,"必須の勘定" ,"必須の理由コード" ,"必須の伝票番号"],
            "answer": ["必要な日付項目の数" ,"必須の勘定","必須の伝票番号"],
            "explanation":"連絡文書タイプでは、文書作成時に必須となるデータ項目（勘定・伝票番号・日付）を設定できます。\n連絡文書タイプは入力必須項目を定義可能です。",
            
        },


        # 問題 50
        {   "question_number": 50,
            "question": "複数の会社コードを1つの支払処理に含めようとしています。 会社コードの前提条件は何ですか。",
            "choices": ["支払取引の設定が同じである必要がある。","同じ管理領域に属している必要がある。","同じ国に存在する必要がある。","すべて同じ会社に属している必要がある。"],
            "answer": "同じ国に存在する必要がある。",
            "explanation":"複数会社コードを1つの支払処理に含めるには、同一国である必要があります。\n支払処理の会社コード統合には国制約があることを理解することがポイントです。",
            
        },

        # 問題 51
        {   "question_number": 51,
            "question": "債権と債務を再グループ化するために、何を設定しますか",
            "choices": ["ソート方法" ,"計算方法" ,"引当方法" ,"評価方法"],
            "answer": "ソート方法",
            "explanation":"債権・債務を再グループ化して整理する場合、ソート方法を設定して勘定の順序や優先度を決定します。\n再グループ化 = ソート順の制御が重要です。",
            
        },
    ],  
 
   "トピック 4: 固定資産管理": [
       # 問題 52
       {   "question_number": 52,
           "question": "会社コードに対して残高繰越を実行します。 ログを確認すると、固定資産に関するエラーが表示されています。 このエラーの原因は何ですか。",
           "choices": ["建設仮勘定の決済を実行していない。" ,"不完全な資産マスタレコードがある。" ,"前会計年度をクローズしていない。" ,"減価償却が完全に転記されていない。"],
           "answer": "前会計年度をクローズしていない。",
           "explanation":"◆ G/L 残高繰越を行うとき、固定資産管理の会計年度変更も同時に実施されます。\n例えば、前年の資産情報を新しい年度に引き継ぐイメージです。\n◆ 会計年度変更では新しい年度をオープンするため、事前に前年度の年度末処理を完了させ、前年度をクローズしておく必要があります。\n例えば、前年分の減価償却や資産マスタの確認が終わっていないと次年度に移行できません。\n◆ 年度末処理でよくあるエラーには次の 2 つがあります。\n(1) 不完全な資産マスタレコードがある ⇒ 資産情報が足りないと処理できません。\n(2) 減価償却が完全に転記されていない ⇒ 全ての減価償却が会計に反映されていない場合、繰越処理ができません。",
           
       },


       # 問題 53
       {   "question_number": 53,
           "question": "1つの資産の減価償却費を2つの原価センタに転記しようとしています。この処理をどのように実行しますか。",
           "choices": ["資産マスタデータに実際の原価センタと統計原価センタを割り当てる。","資産マスタデータに2つの実際の原価センタを割り当てる。","資産マスタデータに、 2つの原価センタに定期的に決済する実績内部指図を割り当てる。","資産マスタデータに、 2つの原価センタに定期的に決済する統計指図を割り当てる。"],
           "answer": "資産マスタデータに、 2つの原価センタに定期的に決済する実績内部指図を割り当てる。",
           "explanation":"◆ 1つの資産は、直接 2つの原価センタに割り当てることはできません。\n例えば、同じ机を「営業部」と「経理部」の両方に直接登録することはできないイメージです。\n\n◆ もし1つの資産の減価償却費を2つの原価センタに振り分けたい場合は、資産を「実績指図」に割り当てます。\nそして、その指図を使って、営業部・経理部などの複数の原価センタへ定期的に決済（配分）します。\n例えば、机の減価償却費を毎月50%ずつ「営業部」と「経理部」に分けて振り分けるような仕組みです。\n\nまとめると、「資産は1つの原価センタにしか直結できないけど、実績指図を経由すれば複数の原価センタに減価償却費を分配できる」ということです。\n",
           
       },


       # 問題 54
       {   "question_number": 54,
           "question": "パラメータ「貸借対照表」 および 「一致」 が有効な固定資産管理の勘定割当として、(設備予算管理に関連しない) WBS 要素を有効化しました。 結果はどのようになりますか。(2つ選択)",
           "choices": ["資産マスタデータの WBS 要素は、計画償却記帳時に変更することができる。", "WBS 要素は決済に使用できなくなる。","WBS 要素は、資産マスタレコードに入力することができる。","資産が資本化されると、 資産マスタレコードでWBS 要素を変更できなくなる。"],
           "answer": ["WBS 要素は、資産マスタレコードに入力することができる。" ,"資産が資本化されると、 資産マスタレコードでWBS 要素を変更できなくなる。"],
           "explanation":"勘定割当対象の有効化では、「貸借対照表」区分と「一致」区分という2つの設定があります。\n「貸借対照表」区分は、その勘定割当対象が貸借対照表に関係するかどうかを決めるもので、資産が資本化されると資産マスタで変更できなくなります。\n「一致」区分は、マスタレコードから自動で選ばれた勘定割当を転記時に変更しないようにする設定で、これによって資産マスタで定義された勘定割当対象に沿って仕訳を転記できます。\n例えると、「貸借対照表」区分は資産を棚に固定して動かせなくするラベルのようなもので、\n「一致」区分は決まった住所に手紙を届けるためにルール通りに転送する仕組みのようなイメージです。",
       },


       # 問題 55
       {   "question_number": 55,
           "question": "償却領域 01 の特性は何ですか。(2つ選択)",
           "choices": ["常にリアルタイムで転記する必要がある。" ,"他の領域から値を引き継ぐことはできない。" ,"原価計算評価領域タイプとして定義されている必要がある。" ,"リーディング元帳 OL にリンクされている必要がある。"],
           "answer": ["常にリアルタイムで転記する必要がある。" ,"他の領域から値を引き継ぐことはできない。"],
           "explanation":"償却領域01は、会社が決められた会計ルールに沿って固定資産の減価償却を計算するための基本的な場所です。\nこの領域では、帳簿にすぐ反映される設定になっていて、他の償却領域の数字を引き継ぐのではなく、自分で計算します。\n商法の貸借対照表用の評価を行うタイプで、必ずしもメインの帳簿（リーディング元帳）に割り当てる必要はありません。\n例えると、償却領域01は「決まったルール通りに計算するための基本の計算道具箱」のようなものです。",
           
       },


       # 問題 56
       {   "question_number": 56,
           "question": "固定資産管理の勘定設定はどのレベルで定義しますか。(二つ選択)",
           "choices": ["クライアント" ,"勘定コード表" ,"会社コード" ,"償却表"],
           "answer": ["勘定コード表" ,"償却表"],
           "explanation":"勘定設定とは、固定資産を購入したり売ったりしたときに、どの勘定科目（G/L勘定）を使うかを決める仕組みです。\nこれは資産の種類ごとに割り当てます。実際に設定する際は、どの勘定科目表（勘定コード表）を使うかを選び、さらに償却表にある各償却領域ごとに登録します。\n例えると、「資産の種類ごとに、どの財布からお金を出すか決めるルール」のようなイメージです。",
           
       },

       # 問題 57
       {   "question_number": 57,
           "question": "カスタマイジングで統合資産取得の技術消込勘定を定義します。 どの前提条件を満たす必要がありますか。(2つ選択)",
           "choices": ["勘定が各資産クラスの勘定設定で定義されている。" ,"勘定が貸借対照表勘定である。" ,"勘定が固定資産に対する統制勘定として定義されている。" ,"勘定が未消込明細管理勘定として定義されている。"],
           "answer": ["勘定が貸借対照表勘定である。" ,"勘定が固定資産に対する統制勘定として定義されている。"],
           "explanation":"統合資産取得では伝票が「業務パート」と「評価パート」に分かれ、業務パートは全会計ルールで有効、評価パートは特定の会計ルールで有効です。\nこれにより技術消込勘定の残高は全元帳グループでゼロになります。技術消込勘定は貸借対照表用の統制勘定で、固定資産用勘定設定では定義できません。\n例えると、業務パートは「全員共有の帳簿」、\n評価パートは「会計ルールごとの帳簿」、\n技術消込勘定は「最終的にゼロになる調整用スペース」です。",
       },

       # 問題 58
       {   "question_number": 58,
           "question": "固定資産管理でトランザクション AS91 を使用してレガシーデータを転送すると、何を実現できますか。",
           "choices": ["マスタデータの登録","G/Lで集計の欠損を転記する" ,"レガシーデータ転送の会社コードステータスの設定" ,"取込価額の転記"],
           "answer": "マスタデータの登録",
           "explanation":"古いシステムにある資産データが少ない場合は、トランザクション AS91 を使って手作業で資産データを入力できます。\nただし、その資産の取得価額は別のトランザクション ABLDT を使って追加で登録する必要があります。\n例えると、「少量のデータは手で帳簿に書き込めるけど、値段だけは別のノートに記録する」というイメージです。",
           
       },

       # 問題 59
       {   "question_number": 59,
           "question": "システムでパラレル通貨が使用されています。 パラレル通貨の償却領域の転記区分は何ですか。",
           "choices": ["G/Lへのリアルタイム転記" ,"G/Lへの転記なし" ,"APC をリアルタイムで、 減価償却を定期的に転記" ,"G/Lへの定期転記"],
           "answer": "G/Lへの転記なし",
           "explanation":"◆ パラレル通貨の償却領域では、次のような設定を行うのが一般的です。\n\n償却領域に対する総勘定元帳への転記方法を「領域による転記なし」に設定する。\n償却領域に、パラレル通貨の通貨タイプを割り当てる。\n償却領域に、参照償却領域（別の償却領域に価額を提供する領域）を割り当てる。 \n\n例えば：会社が日本円（JPY）を主通貨、米ドル（USD）をパラレル通貨として扱っている場合、パラレル通貨用の償却領域を作ります。この領域は G/L に直接転記せず、参照償却領域から金額を受け取り、USDベースの償却額を計算・管理します。\nポイントは「パラレル通貨用の領域は、直接仕訳を流さず、別の償却領域を参照して使う」という仕組みです。",
                  
        },


       # 問題 60
       {   "question_number": 60,
           "question": "SAP S/4HANA で建設仮勘定をどのように使用するのかを説明するように求められました。 何を強調すればよいですか。(2つ選択)",
           "choices": ["建設仮勘定を完全に資本化した後でも、クレジットメモを転記できる。" ,"貸借対照表の償却領域で、 建設仮勘定に対して減価償却の計算と記帳を実行できる。" ,"建設仮勘定を設備予算管理とともに使用することはできない。" ,"建設仮勘定に対する特別税償却と投資援助を転記できる。"],
           "answer": ["建設仮勘定を完全に資本化した後でも、クレジットメモを転記できる。","建設仮勘定に対する特別税償却と投資援助を転記できる。"],
           "explanation":"◆ 建設仮勘定の特徴は次のとおりです。\n\n- 標準償却キー「0000」を使うと、建設仮勘定の減価償却は計算されません。\n例えば、工事中の建物はまだ価値が確定していないので、この段階では会計上の償却は行わないイメージです。\n\n- 建設仮勘定では、特別な税控除や投資支援を適用することもできます。また、建設仮勘定の前払金は債務管理のシステムで入力可能です。\n例えば、建設用の資材を先に支払った場合、この処理を記録できます。\n\n- 建設仮勘定を完全に資産として登録した後でも、クレジットメモ（返金や値引きの伝票）を記録できます。このためには、償却データの詳細画面でマイナスの取得価額を許可しておく必要があります。\n例えば、建設費の一部が返金された場合に対応できます。\n\n- 設備予算管理（IM）の建設仮勘定を使うと、大規模な設備投資やプロジェクト管理がしやすくなります。内部指図やプロジェクトと建設仮勘定を連携させることで、進行中の工事や投資の管理が簡単になります。",
           
       },


       # 問題 61
       {   "question_number": 61,
           "question": "固定資産管理でセグメントレポートを有効化すると、 どのような結果になりますか。(2つ選択 )",
           "choices": ["セグメントが追加勘定割当設定に表示される。" ,"セグメントが既存の資産マスタデータで自動的に更新される。" ,"セグメントが資産マスタデータの画面レイアウトに表示される。" ,"セグメント有効化を取り消すことができる。"],
           "answer": ["セグメントが追加勘定割当設定に表示される。" ,"セグメントが資産マスタデータの画面レイアウトに表示される。"],
           "explanation":"◆ セグメントレポートを有効化すると、資産マスタで「利益センタ」と「セグメント」を入力できるようになります。\n\n- 例えば、会社全体で複数の事業部がある場合、どの資産がどの事業部に属しているかを管理できるようになります。\n\n◆ セグメントレポートを有効化すると、次のことが起こります。\n\n(1) 追加の勘定割当対象として、利益センタとセグメントが使えるようになります。\n(2) 資産マスタの画面レイアウトに、利益センタとセグメントの入力欄が追加されます。\n(3) 新しい資産を登録するときの入力画面に、利益センタとセグメントを設定する欄が表示されます。\n(4) すでに登録済みの資産については、利益センタやセグメントの情報は自動で更新されません。\n\n- 注意：一度有効化したセグメントレポートを無効にすることはできません。\n\n営業部と製造部で使う設備を分けて管理したい場合、この設定を使うとどの資産がどの部門に属しているかを簡単に確認できます。",
           
       },


       # 問題 62
       {   "question_number": 62,
           "question": "カスタマイジングでは、統合資産取得の技術消込勘定をどのレベルで定義できますか。(2つ選択)",
           "choices": ["資産クラス" ,"勘定設定" ,"勘定コード表" ,"償却領域"],
           "answer": ["勘定設定" ,"勘定コード表"],
           "explanation":"◆ 統合資産取得で使う「技術消込勘定」は、資産の取引で使用する勘定を登録する場所に応じて2通りの方法があります。\n\n- 例えば、会社で設備を購入したときに、その購入金額をどの勘定に振り分けるかを決める設定です。\n\n◆ 設定方法は次の通りです。\n\n(1) 1つの技術消込勘定だけを使う場合\n- 勘定コード表に直接登録します。\n- 例えば、すべての建物購入に同じ勘定を使う場合です。\n\n(2) 複数の技術消込勘定を使う場合\n- 勘定コード表と勘定設定（資産クラスに紐づく設定）の組み合わせで登録します。\n- 例えば、建物と機械で別々の勘定に振り分けたい場合です。",
       },

       # 問題 63
       {   "question_number": 63,
           "question": "償却開始日を決定するには、次のどの日付を使用しますか。",
           "choices": ["支払基準日" ,"資產評価日" ,"転記日付" ,"取得日"],
           "answer": "資產評価日",
           "explanation":"◆ 固定資産管理で「起算日バリアント」という設定を使うと、資産の取引タイプごとに評価日の初期値を決めることができます。\n\n- 例えば、建物購入や機械購入など、それぞれの資産タイプで最初の評価日（取得日）を自動的に設定できます。\n\n◆ 仕組みは次の通りです。\n\n1. 取得転記の資産評価日と期間管理方法を使って、通常償却（毎月の減価償却）の開始日が決まります。\n2. 期間管理方法は、償却キー（どの方法で減価償却するかの設定）によって更新されます。\n\n- 例えば、建物は取得日の翌月1日から償却を開始、機械は取得日当日から償却を開始、といった設定が可能です。\n\nポイントは、「資産の種類ごとに償却開始日を自動で決める設定ができる」という点です。",
           
       },

       # 問題 64
       {   "question_number": 64,
           "question": "技術消込勘定はどのシナリオで転記されますか。(2つ選択)",
           "choices": ["仕入先請求書 (購買発注にリンクされていない) のある直接資産取得転記" ,"建設仮勘定に対する設備投資指図の決済" ,"資産クラス間の資産振替転記" ,"勘定設定として資産を使用した購買発注の評価入庫"],
           "answer": ["仕入先請求書 (購買発注にリンクされていない) のある直接資産取得転記" ,"勘定設定として資産を使用した購買発注の評価入庫"],
           "explanation":"◆ 債務管理（お金の支払い管理）や在庫購買管理（物の購入管理）と連動した資産の取得取引では、会計伝票が「業務用」と「評価用」に分かれて登録されます。\n\n- それぞれの伝票では、技術消込勘定という特別な勘定が使われます。\n\n◆ 債務管理（FI-AP）と連動した資産取得取引とは、仕入先からの請求書を使って直接資産を取得する場合です。\n\n- 例えば、パソコンを仕入先に注文して請求書が届き、その金額で資産として登録する場合です。\n\n◆ 在庫購買管理（MM）と連動した資産取得取引とは、資産の購入注文に対する後続処理を指します。資産取得のタイミングは入庫の評価方法によって変わります。\n\n1. 評価入庫の場合：物が入庫した時点で資産取得となります。\n - 例：工場に機械が届いた時点で資産として登録されます。\n2. 非評価入庫の場合：請求書照合時に資産取得となります。\n - 例：物は倉庫に届くが、請求書が届いた時点で資産として登録されます。\n\nポイントは、「資産取得のタイミングが、仕入れの種類や評価方法によって変わる」という点です。",
           
       },

       # 問題 65
       {   "question_number": 65,
           "question": "次のオブジェクトのうち、 資産に原価転記する唯一の統計勘定割当はどれですか。",
           "choices": ["WBS 要素","内部指図" ,"原価センタ" ,"利益センタ"],
           "answer": "利益センタ",
           "explanation":"◆ 原価センタ、内部指図、WBS 要素は、資産マスタに「どの費用に割り当てるか」を決めるために使えます。\n\n- 例えば、工場の機械を購入した場合、その費用を「製造部門の原価センタ」に割り当てることができます。\n\n◆ 内部指図や WBS 要素には「統計目的のみで使う」という区分があります。\n\n- 統計内部指図や統計 WBS 要素は、実際の費用割当には使えません。\n- ただし、原価センタと組み合わせて資産マスタに設定することは可能です。\n - 例：あるプロジェクトの費用を統計的に管理したい場合、統計 WBS 要素を使って記録します。\n\n◆ 利益センタも勘定割当対象の項目には含まれていますが、常に統計目的でしか使われません。\n\nポイントは、「原価センタは実際の費用割当に使い、内部指図や WBS、利益センタは統計目的での管理に使う」ということです。",
           
       },

       # 問題 66
       {   "question_number": 66,
           "question": "臨時償却資産に転記します。 FI-AA および FI-GL にはどのような影響がありますか。",
           "choices": ["転記はリアルタイムでFI-AAに行われ、 定期記帳プログラムが実行されると FI-GL に転記が行われる。" ,"転記はリアルタイムでFI-AAに行われ、償却記帳プログラムが実行されると FI-GL に転記が行われる。" ,"転記が FI-AA および FI-GL にオンラインかつリアルタイムで行われる。" ,"償却記帳プログラムが実行されまで、 FI-AA および FI-GL に転記は実行されない。"],
           "answer": "転記はリアルタイムでFI-AAに行われ、償却記帳プログラムが実行されると FI-GL に転記が行われる。",
           "explanation":"◆ 通常の減価償却は「償却キー」を使って自動でスケジュールを設定できます。\n\n例えば、毎月の減価償却額を自動で計算して登録する場合です。\n\n◆ これに加えて、個別の資産に対して手動で「臨時償却」のスケジュールを設定することも可能です。\n例えば、特別な設備投資で今年だけ追加で減価償却したい場合、臨時償却を設定します。\n\n◆ 臨時償却は設定した時点では会計伝票は生成されません。\nFI-AA（固定資産管理）に登録しただけで、実際の財務会計伝票は、償却記帳プログラムを実行した時に作られます。\n\nポイントは、「通常の減価償却は自動で伝票作成、臨時償却は手動設定で伝票は後から作られる」ということです。",
           
       },


       # 問題 67
       {
           "question_number": 67,
           "question": "少額資産 (LVA) 管理を設定する必要があります。 必要な作業は何ですか。OLVA の最小金額を3つのレベル (会社コード、 償却領域、 資産クラス) で設定する。",
           "choices": ["LVA の最小金額を3つのレベル (会社コード、 償却領域、 資産クラス) で設定する。","個別管理で LVA の基本数量単位を定義する。","個別管理または集合管理を使用してLVA を管理するため、 2つの異なる資産クラスを定義する。","OLVA の最大金額を2つのレベル(会社コードおよび償却表) で設定する。"],
           "answer": "個別管理または集合管理を使用してLVA を管理するため、 2つの異なる資産クラスを定義する。",
           "explanation":"◆ 少額資産の管理では、個別管理と集合管理のどちらかを選ぶことができます。\n\n例えば、パソコン1台ごとに管理する場合は「個別管理」、消耗品の文房具などをまとめて管理する場合は「集合管理」を使います。\n\n◆ 管理タイプごとに、それぞれ資産クラスを設定する必要があります。\n例えば、個別管理用の資産クラスは「PC用」、集合管理用の資産クラスは「文房具用」と設定します。\n\n◆ 集合管理を選んだ場合は、その資産クラスに「基本単位」（数量の単位）を指定する必要があります。\n例えば、文房具は「セット」単位で管理する、といった指定です。\n\n◆ 少額資産の最大限度額は、会社コードごと、償却領域ごとに設定できます。\n例えば、1台あたり10万円までのパソコンは少額資産として扱う、といった設定です。",
           
       },


       # 問題 68
       {   "question_number": 68,
           "question": "資産に対して償却記帳を実行します。 特定の資産について、減価償却費を資産マスタデータで指定された原価センタとは異なる原価センタに転記する必要があります。 これをどのようにして実現しますか。",
           "choices": ["「同一」 パラメータを勘定割当設定で無効に設定する。" ,"資産マスタデータから原価センタを削除する。" ,"財務会計明細で代入を登録する。" ," 設定により、対応するエラーを警告に変更する。"],
           "answer": "財務会計明細で代入を登録する。",
           "explanation":"◆ 原価センタは、資産マスタに登録されている原価センタと常に一致させる必要があります。\n例えば、資産マスタで「営業部」の原価センタが設定されている場合、会計伝票でも必ず「営業部」が使われます。\n\n◆ このため、勘定割当対象の設定で「一致（同一）」区分を無効にすることはできません。\n\n◆ ただし、財務会計の伝票明細レベルで代入を行うと、会計伝票の原価センタを変更することが可能です。\n例えば、特別な費用配分で一時的に別の原価センタに振り替えたい場合などです。\n\nポイントは、標準設定ではこの代入機能は無効になっているため、使用する場合は有効化が必要ということです。",
           
       },


       # 問題 69
       {   "question_number": 69,
           "question": "購買発注を参照せずに、資産取得の仕入先請求書を転記します。どの会計伝票が生成されますか。",
           "choices": ["会計原則ごとに1つの伝票" ,"会計原則ごとに個別の伝票" ,"すべての会計原則に対して1つの伝票" ,"会計原則ごとに1つの伝票、すべての会計原則に対して1つの伝票"],
           "answer": "会計原則ごとに1つの伝票、すべての会計原則に対して1つの伝票",
           "explanation":"◆ 購買発注がなくても、仕入先請求書を使って資産取得の会計処理を行うことができます。\n例えば、建物や設備を購入した際に、発注書を作らずに請求書だけで登録する場合です。これは「債務管理（AP）と統合された資産取引」と呼ばれます。\n\n◆ 統合資産取得の転記では、会計伝票が「業務用」と「評価用」の2つに分かれて作成されます。\n\n(1) 業務パート（仕入先請求書）\n統合資産取得の技術消込勘定に対して、すべての会計ルールで伝票が転記されます。\n例えば、会社全体の会計原則に従った伝票が自動生成されます。\n\n(2) 評価パート（資産の資本化部分）\n資産として登録する部分の伝票が、個別に会計原則ごとに生成されます。\nこの伝票も技術消込勘定に転記され、会計原則ごとに元帳グループ固有の伝票が作られます。\n\nポイントは、「請求書だけで資産取得でき、伝票は業務用と評価用に分かれて自動作成される」ということです。",
           
       },
    ],
   
    "トピック 5: 決算処理": [
       # 問題 70
       {   "question_number": 70,
           "question": "決算前の活動として、選択したサプライヤが残高を確認します。 不一致がある場合にのみ応答を期待する場合、 どの確認手順を使用しますか。",
           "choices": ["残高確認書" ,"残高通知" ,"勘定報告書" ,"残高照会時に連絡文書依頼"],
           "answer": "残高通知",
           "explanation":"◆ 債権や債務の残高を確認するには、レポート SAPF130D と SAPF130K を使い、得意先や仕入先とやり取りする連絡文書を登録します。\n\n◆ これらのレポートでは、残高確認の方法として次のいずれかを選択できます。\n\n(1) 残高確認書（常時問い合わせ）\n確認が必要な金額を得意先や仕入先に通知します。\n残高が一致していても、不一致でも必ず確認を依頼します。\n\n(2) 残高通知（不一致問い合わせ）\n確認が必要な金額を通知します。\nただし、得意先や仕入先が提示した残高と一致しない場合のみ、返答を受け取ります。\n\n(3) 残高照会時に連絡文書依頼\n得意先や仕入先に勘定残高を通知してもらうよう依頼します。\n\nポイントは、「残高確認の方法を選んで、必要に応じて相手に通知や確認を依頼できる」ということです。"
       },
       
       # 問題 71
       {   "question_number": 71,
           "question": "会社間マッチングおよび照合 (ICMR) をどのように定義しますか。(2つ選択)",
           "choices": ["セントラルファイナンスのシステム間の取引マッチングを容易にするソリューションである。" ,
                       "グループレポートと統合できるソリューションである。" ,
                       "SAP S/4HANA コアに組み込まれたソリューションである。" ,
                       "SAP Group Reporting Data Collection の並列実装を必要とする。ソリューションである。"],
           "answer": ["グループレポートと統合できるソリューションである。","SAP S/4HANA コアに組み込まれたソリューションである。"],
           "explanation":"◆ 会社間マッチングや照合機能は、異なる会社間での差異を防ぎ、決算を早く正確に処理できるようにサポートします。\n\n◆ 主な特徴は次のとおりです。\n\n(1) SAP S/4HANA に組み込まれているため、追加のシステムは不要です。\n\n(2) 取引レベルでマッチングを行い、リアルタイムで調整できます。\n\n(3) 不一致は自動で調整されます。\n\n(4) アプリ内の通信やワークフロー機能を利用できます。\n\n(5) 会社、利益センタ、連結単位など、さまざまな組織単位で柔軟に設定可能です。\n\n(6) 高速で効率的なマッチングと調整が可能です。\n\n(7) グループレポートや会社間消去と統合されています。\n\nポイントは、「会社間の取引差異を早期に把握・調整し、決算をスムーズにするための機能が一通りそろっている」ということです。",
           
       },
              
       # 問題 72
       {   "question_number": 72,
           "question": "あなたの会社では、SAP Intercompany Matching and Reconciliation(ICMR) について聞いたことがあり、ニーズに対応できるかどうか疑問に思っています。 ICMR はどの目的に役立ちますか。(2つ選択)",
           "choices": ["設定されたルールに基づいて会社間収益および原価の消去をトリガするため" ,
                       "ワークフローをトリガする会社間データの不一致を強調表示して解決するため" ,
                       "会社間不一致を修正するための自動転記を生成するため" ,
                       "会社間 AR/AP 残高の自動消去を生成するため"],
           "answer": ["ワークフローをトリガする会社間データの不一致を強調表示して解決するため","会社間不一致を修正するための自動転記を生成するため"],
           "explanation":"◆ 会社間マッチングおよび照合機能 (ICMR) のプロセスの流れは次のとおりです。\n\n(1) データの収集\n\n- 会計管理テーブルや連結仕訳テーブルからデータを直接取得\n\n- 外部ファイルからアップロードされたデータを収集\n\n- API を通じてデータを書き込む\n\n(2) 伝票のマッチング\n\n- 柔軟なルールに基づき、集計レベルまたは明細レベルでマッチングを実行\n\n(3) 不一致の解決\n\n- 理由を明示して透明性を確保\n\n- 自動仕訳を含む会社間データの不一致を解消するワークフローをトリガ\n\n(4) 照合残高の確認\n\n- コンテキスト指向の照合ケースに基づく多次元レポート\n\n- 元伝票の照会\n\n◆ ポイントは次の通りです。\n\n-「(3) 不一致の解決」会社間データの不一致を理由説明とワークフローで解消するプロセスが含まれることです。",
       },
       
       # 問題 73
       {   "question_number": 73,
           "question": "特別会計期間に仕訳を転記します。 次のどの条件を満たす必要がありますか。(2つ選択)",
           "choices": ["新会計年度への残高繰越が行われている必要がある。" ,
                       "転記するためには会計期間の管理で最後の会計期間をオープンする必要がある。" ,
                       "最後の会計期間に転記日付を入力する必要がある。" ,
                       "転記するためには会計期間の管理で特別会計期間をオープンする必要がある。"],
           "answer": ["最後の会計期間に転記日付を入力する必要がある。","転記するためには会計期間の管理で特別会計期間をオープンする必要がある。"],
           "explanation":"◆ 特別会計期間への転記を行うためには、次の 2 つの条件を満たす必要があります。\n\n(1) 特別会計期間がオープンされていること。\n\n(2) 会計伝票の転記日付に、その年度の最終月の日付を入力すること。",
       },       
       
       # 問題 74
       {   "question_number": 74,
           "question": "会社間マッチングおよび照合ツールからのマッチング結果は、 どこで確認できますか。",
           "choices": ["連結仕訳帳テーブル (ACDOCU)" ,
                       "会計伝票セグメントテーブル (BSEG)" ,
                       "アプリケーション固有テーブル (ICADOCM)" ,
                       "ユニバーサルジャーナルテーブル (ACDOCA)"],
           "answer": "アプリケーション固有テーブル (ICADOCM)",
           "explanation":"◆ 会社間マッチングおよび照合ツールでは、基礎となるデータソースから継続的に受信する伝票について、マッチングを個別に実行することも、バックグラウンドジョブで自動的に実行することもできます。\n\nマッチングが実行されると、ICADOCM テーブルにデータが登録されます。\n\n◆ マッチングは、次の複数の方法で実行可能です。\n\n(1) マッチング方法定義アプリを使用する。\n\n(2) 割当管理 - マッチング方法別アプリを使用する。\n\n(3) 割当管理 - 照合ケース別アプリを使用する。\n\n(4) マッチング実行ジョブスケジュールアプリを使用する。",
       },       
       
       # 問題 75
       {   "question_number": 75,
           "question": "外貨評価時に考慮される明細はどれですか。(2つ選択)",
           "choices": ["明細消込管理として定義されている貸借対照表勘定の明細評価" ,
                       "明細消込管理として定義されていない貸借対照表勘定の明細の残高評価" ,
                       "元帳グループ固有の明細消込管理を使用して定義された貸借対照表勘定の明細の残高評価" ,
                       "統制勘定として定義されていない貸借対照表勘定の明細評価"],
           "answer": ["明細消込管理として定義されている貸借対照表勘定の明細評価","明細消込管理として定義されていない貸借対照表勘定の明細の残高評価"],
           "explanation":"◆ 貸借対照表の勘定で、明細ごとの消込管理の設定によって外貨評価の方法が変わります。\n\n(1) 明細消込管理が設定されている勘定の場合\n    ⇒ 各明細ごとに外貨評価が行われます。\n\n(2) 明細消込管理が設定されていない勘定の場合\n    ⇒ 勘定全体の残高に対してまとめて外貨評価が行われます。",
           
       },       
       
       # 問題 76
       {   "question_number": 76,
           "question": "SAP S/4HANA で使用できる実地棚卸方式はどれですか。(3つ選択)",
           "choices": ["実在庫方式" ,
                       "標準在庫方式" ,
                       "継続棚卸方式" ,
                       "循環棚卸方式",
                       "定期棚卸方式"],
           "answer": ["継続棚卸方式" ,"循環棚卸方式","定期棚卸方式"],
           "explanation":"◆ SAP S/4HANA でサポートされている実地棚卸の方法は、次の 3 種類です。\n\n(1) 継続棚卸方式\n- 会計年度を通して在庫の確認が行われます。\n- すべての品目は少なくとも年に 1 回は実地棚卸が必要です。\n\n(2) 定期棚卸方式\n- 貸借対照表の基準日に、すべての在庫品目を一度に確認します。\n- 棚卸の間は倉庫内の在庫移動が制限されます。\n\n(3) 循環棚卸方式\n- 会計年度内に定期的に在庫品目の確認を行います。\n- 確認の間隔は、品目ごとに設定された循環棚卸区分によって異なります。",
           
       },       
       
       # 問題 77
       {   "question_number": 77,
           "question": "SAP S/4HANA の追加元帳の説明として最も適切な文は次のどれですか。(2つ選択)",
           "choices": ["複数の追加元帳から同じ基本元帳を参照できる。" ,
                       "追加元帳に独自の会計期間バリアントを割当できる。" ,
                       "追加元帳に独自の会計年度バリアントを割当できる。" ,
                       "追加元帳では、基本元帳とは異なる通貨を使用できる。",],
           "answer": ["複数の追加元帳から同じ基本元帳を参照できる。" ,"追加元帳に独自の会計期間バリアントを割当できる。"],
           "explanation":"◆ 追加元帳の主な機能は次のとおりです。\n\n(1) 1 つの基本元帳に対して、複数の追加元帳を割り当てることができます。\n\n(2) 追加元帳ごとに独自の会計期間設定（会計期間バリアント）を割り当てることが可能です。\n\n(3) 追加元帳には、基本元帳と同じ通貨タイプと会計年度設定が適用されます。",
           
       },       
       
       # 問題 78
       {   "question_number": 78,
           "question": "外貨評価における評価方法の役割は何ですか。(3つ選択)",
           "choices": ["評価転記の転記日付および反対仕訳日付を定義する。" ,
                       "評価転記の伝票タイプを定義する。" ,
                       "評価手順を定義する" ,
                       "評価転記のG/L 勘定を決定する。",
                       "換算レートタイプを決定する。"],
           "answer": ["評価転記の伝票タイプを定義する。" ,"評価手順を定義する","換算レートタイプを決定する。"],
           "explanation":"◆ 評価方法では、外貨をどう扱うかについて、次の基本設定を行います。\n\n(1) 使用する評価手順：たとえば、低価法や常時評価法など、どの方法で評価するかを決めます。\n\n(2) 換算差の会計処理：為替レートの変動による損益をどの伝票タイプで記録するかを指定します。\n\n(3) 為替レートの基準：どの換算レートタイプを使って計算するかを決めます。\n\n◆ 評価方法は、時間ごとに変更や更新が可能です。",
           
       },       
       
       # 問題 79
       {   "question_number": 79,
           "question": "仕入先勘定の未消込明細に対して外貨評価を実行します。 この外貨評価は期末処理レポートのみに使用した後、 取り消す必要があります。評価差額を転記するために、 次のどの勘定が使用されますか。",
           "choices": ["仕入先統制勘定" ,
                       "特殊仕訳コードがある個別仕入先勘定" ,
                       "外貨の調整 G/L 勘定" ,
                       "代替統制勘定",],
           "answer": "外貨の調整 G/L 勘定",
          "explanation":"◆ 仕入先の未消込明細を外貨で評価する場合、統制勘定には直接書き込めません。\n\nそのため、評価による差額は「外貨評価の調整勘定」を使って処理します。\n\n◆ この調整勘定は、貸借対照表上では統制勘定と同じ行に表示されます。",
           
       },       
       
       # 問題 80
       {   "question_number": 80,
           "question": "会計期間バリアントを使用して転記を制限できるのは、どのレベルですか。(2つ選択)",
           "choices": ["固定資産番号" ,
                       "仕入先勘定" ,
                       "得意先統制勘定" ,
                       "G/L 勘定",],
           "answer": ["得意先統制勘定" , "G/L 勘定",],
           "explanation":"◆ 会計期間の管理では、「会計期間バリアント」を使って、勘定タイプごとにいつ会計期間を開くか閉じるかを設定できます。\n\n管理できる勘定タイプの例は以下の通りです。\n\n- A: 資産\n- D: 得意先勘定\n- K: 仕入先勘定\n- S: 総勘定元帳勘定\n- M: 品目勘定\n- V: 契約勘定\n\n◆ 勘定間隔ごとに G/L 勘定を設定する必要があります。\n補助元帳の場合は、統制勘定を入力することで、統制勘定ごとに会計期間の管理方法を変えることができます。\nポイントは次の通りです。\n\n- 「会計期間バリアント」を使うと、勘定タイプごとに会計期間の開閉を細かく管理できる。\n\n- G/L 勘定ごとに期間を設定する必要がある。\n\n- 補助元帳の場合は統制勘定を指定することで、統制勘定単位で期間管理の方法を変えられる。\n\n要するに、「どの勘定でいつ会計処理できるか」を柔軟にコントロールできる仕組みです。",
           
       },       
       
       # 問題 81
       {   "question_number": 81,
           "question": "入庫 / 請求仮勘定の貸借が一致していません。 考えられる原因として、\正しいものはどれですか。(2つ選択)",
           "choices": ["購買発注に分割請求書受領があるが、 まだ入庫がない。" ,
                       "購買発注に、まだ請求書を受領していない分割入庫がある。" ,
                       "購買発注に、同じ数量と金額の入庫と請求書受領がある。" ,
                       "購買発注に、数量が同じで金額が異なる入庫と請求書受領がある。",],
           "answer": ["購買発注に分割請求書受領があるが、 まだ入庫がない。" , "購買発注に、まだ請求書を受領していない分割入庫がある。",],
           "explanation":"◆ 入庫と請求の仮勘定の貸借が合わない場合は、以下のような理由によります。\n\n- 入庫は済んでいるが、請求書がまだ届いていない。\n- 逆に、請求書は届いているが、入庫処理がまだ行われていない。\n\nつまり、納入された数量と請求済の数量が一致していない場合に発生します。\n\n◆ 価格差異は、別の価格差異勘定や在庫勘定に転記されるため、入庫/請求仮勘定の貸借不一致には含まれません。\n\nポイントは、「数量のずれが貸借不一致の原因であり、価格差は影響しない」ということです。",
       },       
       
       # 問題 82
       {   "question_number": 82,
           "question": "財務諸表レポートを実行すると、計算された純利益が予想と異なることがわかりました。 問題の原因は何ですか。(2つ選択)",
           "choices": ["勘定の残高による勘定グループ割当を選択し、それが負債として表示されている" ,
                       "財務諸表注記に属する負債ノードに勘定を追加した。" ,
                       "財務諸表バージョンに割り当てられていない勘定がある。" ,
                       "間違ったノードに勘定を追加し、 それが資産セクションに含まれている",],
           "answer": ["財務諸表注記に属する負債ノードに勘定を追加した。" , "財務諸表バージョンに割り当てられていない勘定がある。",],
           "explanation":"◆ 財務諸表バージョンでは、勘定をグループごとに分けて管理しています。\n\n- 資産：現金、建物、機械など、会社が持っているもの\n- 負債および資本：借入金や資本金など、会社の出入り\n- 正味結果: 利益：会社の「儲け」を計算する勘定\n- 正味結果: 損失：会社の「損失」を計算する勘定\n- 損益結果：上のグループに含まれない勘定の結果\n- 未割当：まだ財務諸表に割り当てられていない勘定\n- 財務諸表注記：計算には含まれない注記用の勘定\n\n◆ 計算の仕組み\n\n- 「正味結果: 利益」「正味結果: 損失」\n → 「資産」と「負債・資本」に割り当てられている勘定の残高から計算されます。\n → 「未割当」や「財務諸表注記」は無視されます。\n\n- 「損益結果」\n → 上のグループに含まれない全ての勘定の残高から計算されます。\n\n◆ 例で考えると\n\n- 会社の現金や建物の残高は「資産」に入るので、利益計算に使われます。\n- まだどこにも割り当てられていない特別な勘定は「未割当」なので、損益計算には含まれません。\n- それ以外の勘定は「損益結果」にまとめられます。\n\n◆ ポイント\n\n- 勘定の「グループ分け」が、どの計算に含めるかを決める\n- 利益・損失は基本的に「資産・負債」から計算\n- 損益結果は「それ以外の勘定」から計算される\n\n◆ 財務諸表バージョンの勘定グループを家計に置き換えるとこんなイメージです。\n\n- 資産：財布の現金や銀行預金、家にある物（貯金や価値のあるもの）\n- 負債および資本：借りているお金や親からもらったお小遣い、貯金の元本\n- 正味結果: 利益：月の「貯金が増えた分」\n- 正味結果: 損失：月の「出費が多くて貯金が減った分」\n- 損益結果：資産・負債に入れなかったお金の増減（臨時収入やちょっとした出費）\n- 未割当：まだどのカテゴリにも入れていないお金\n- 財務諸表注記：家計簿には書くけど計算には含めないメモや予定\n\n◆ 計算の仕組み\n\n- 「正味結果: 利益」「正味結果: 損失」\n → 財布や銀行にあるお金（資産）と借りたお金・元手（負債・資本）から計算されます。\n → メモや未整理のお金（未割当、注記）は無視されます。\n\n- 「損益結果」\n → 上のカテゴリに入れなかったお金（お年玉、臨時のお小遣いなど）から計算されます。\n\n◆ 例で考えると\n\n- 今月の給料やお小遣いで財布に入れたお金は「資産」に入るので、貯金増減の計算に使われます。\n- まだ分類していない友達から借りたお金は「未割当」なので、利益・損失の計算には含まれません。\n- ちょっとした臨時収入やお小遣いは「損益結果」にまとめられます。\n\n◆ ポイント\n\n- 勘定の「カテゴリ分け」が、どの計算に含めるかを決める\n- 利益・損失は主に「財布や貯金（資産）」「借金や元手（負債・資本）」から計算\n- 損益結果は「それ以外のお金」から計算される",
       },       
       
       # 問題 83
       {   "question_number": 83,
           "question": "SAP S/4HANA の見越/繰延エンジンの機能および特徴は次のどれですか。(2つ選択)",
           "choices": ["総勘定元帳のすべての通貨がサポートされる。" ,
                       "最大2つの明細がある見越 / 繰延転記がサポートされる。" ,
                       "転記前に、すべての見越/ 繰延計算をレビューおよび承認する必要がある。" ,
                       "総勘定元帳の会計年度バリアントがサポートされる。",],
           "answer": ["総勘定元帳のすべての通貨がサポートされる。" , "総勘定元帳の会計年度バリアントがサポートされる。",],
           "explanation":"◆ S/4HANA の見越/繰延エンジン の機能や特徴は次のとおりです。\n\n- すべての通貨に対応\n → どの通貨でも見越や繰延処理が可能です。\n\n- 仕訳の明細として保存\n → 記録は ACDOCA テーブルの明細データだけに残ります。総勘定元帳に直接まとめられるわけではありません。\n\n- 会計年度バリアントに対応\n → G/L 元帳で設定されている会計年度の管理方法をそのまま使えます。\n\n- 標準 FI 反対仕訳に対応\n → たとえば FB08 や F.80 トランザクションを使った訂正仕訳も処理可能です。\n\n- 複雑な転記にも対応\n → 複数の明細が関係する処理も、自分で定義したルール（スキーム）で実行できます。\n\n- 定期見越/繰延のレビューや承認\n → 承認プロセスを有効化できるが、オプションです。\n → 手動で設定した見越/繰延の場合は、通常、期間末の承認やレビューは不要です。\n\n◆ ポイント\n\n- 見越/繰延は「記録は明細レベルで残る」仕組みで、元帳のまとめ残高に直接反映されるわけではない\n- 通貨や会計年度の違いを気にせず利用できる\n- 複雑な処理や承認プロセスも柔軟に設定可能",
           
       },       
       
       # 問題 84
       {   "question_number": 84,
           "question": "外貨評価の実行時に、関連する会計原則はどのように決定されますか。",
           "choices": ["評価方法によって" ,
                       "評価クラスによって" ,
                       "評価タイプによって" ,
                       "評価領域によって",],
           "answer": "評価領域によって",
           "explanation":"◆ 外貨評価の複数元帳アプローチ は、以下の手順で進めます。\n\n- 会計原則を決める\n → どの会計ルールで評価するかをまず決定します。\n\n- 会計原則に元帳グループを割り当てる\n → 複数の元帳を使う場合、どのグループに反映させるか設定します。\n\n- 評価領域を作る\n → 外貨評価専用の管理単位（評価領域）を定義します。\n\n- 評価領域に会計原則を割り当てる\n → 作った評価領域で、どの会計原則を使うか指定します。\n\n◆ ポイント\n\n- 複数元帳アプローチでは、会計ルール → 元帳グループ → 評価領域 の順で設定する\n- 外貨評価の結果をどの帳簿で管理するかを明確にできる",
           
       },       
       
       # 問題 85
       {   "question_number": 85,
           "question": "組織に決算処理コックピットを導入しています。 タスクグループを定義する利点は何ですか。(2つ選択)",
           "choices": ["テンプレート全体の更新が可能である。" ,
                       "同一または類似のタスクのある複数の会社コードに対応する。" ,
                       "タスクステータスのタスクリスト間監視が可能である。" ,
                       "タスクのタスクリスト間実行が可能である。"],
           "answer": ["テンプレート全体の更新が可能である。" ,"同一または類似のタスクのある複数の会社コードに対応する。" ],
           "explanation":"◆ Financial Closing コックピットの使い方 は、次の手順で進めます。\n\n- テンプレートの登録\n → 決算作業の流れをまとめた共通テンプレートを作り、全体のスケジュールを決めます。\n\n- タスクグループの登録\n → 類似作業をまとめて管理。複数の会社で同じ作業がある場合に便利です。\n\n- タスクの登録\n → 個別の作業を順番に設定。必要なトランザクションやプログラムもここで指定します。\n\n- 依存関係の定義\n → 作業の前後関係を設定。どの作業を先に実行するかを決めます。\n\n- タスクリストの登録\n → テンプレートから実際に実行するタスクリストを作成します。\n\n- タスクリストのリリース\n → 作成したタスクリストを実行可能な状態にして、システムに反映します。\n\n◆ ポイント\n\n- Financial Closing コックピットは、決算作業の全体を整理して順番に実行できる仕組み\n- テンプレート → タスクグループ → タスク → タスクリスト → 実行 という流れで作業を管理する",
           
       },          
    ],
    
    "トピック 6: SAP S/4HANA の概要および導入": [
       # 問題 86
       {   "question_number": 86,
           "question": "顧客が SAP およびパートナの垂直型ソリューションを見つけてデプロイできるようにする、インテリジェントエンタープライズのコンポーネントはどれですか。",
           "choices": ["エクスペリエンス管理" ,
                       "ビジネスネットワーク" ,
                       "業種別クラウド" ,
                       "インテリジェントスイート",],
           "answer": "業種別クラウド" ,
           "explanation":"◆ インテリジェントエンタープライズの主なコンポーネント は次の通りです。\n\n- ビジネスネットワーク\n → 調達や出張、契約社員などの管理をサポート。SAP 顧客同士がつながり、柔軟な取引の仕組み（バリューチェーン）を作れます。\n\n- エクスペリエンス管理\n → 顧客やパートナー、従業員の感情や意見を収集・評価し、意思決定に活かします。\n\n- インテリジェントスイート\n → 組み込まれた分析機能で、ビジネスプロセスを統合的に管理・実行できます。あらゆる角度から会社の状況を把握できます。\n\n- 業種別クラウド\n → SAP やパートナーが提供する業種特化のソリューションを使って、ベストプラクティスを取り入れたり、現在の業務を拡張したりできます。\n\n- サステナビリティ管理\n → 企業の活動が環境や社会に与える影響を把握・管理できます。例えば温室効果ガスの排出量を管理することが可能です。\n\n- ビジネステクノロジープラットフォーム\n → データ管理や分析だけでなく、アプリ開発やシステム統合もサポート。AI、機械学習、IoT などの技術を使った革新的な取り組みを推進できます。\n\n◆ ポイント\n\n- インテリジェントエンタープライズは、ビジネスの連携・分析・効率化・持続可能性・革新 を一つの仕組みで支援するシステムです。\n\nそれぞれのコンポーネントが、業務や意思決定、環境管理、技術活用など、異なる役割を担っています。",        
           
       },       
       
       # 問題 87
       {   "question_number": 87,
           "question": "SAP HANA の主要な機能/特徴は何ですか。(2つ選択)",
           "choices": ["SAP HANA では、同じテーブルから取引処理と分析処理を実行できる。" ,
                       "SAP HANA は、カラムストアを使用してデータを整理するように最適化されている。" ,
                       "SAP HANA は、階層データモデルアーキテクチャに基づいて構築されている。" ,
                       "SAP HANA は、集計と索引が使用できるよう最適化されている。",],
           "answer": ["SAP HANA では、同じテーブルから取引処理と分析処理を実行できる。" ,"SAP HANA は、カラムストアを使用してデータを整理するように最適化されている。" ],
           "explanation":"◆ SAP HANA の主要な機能・特徴\n\n- OLTP と OLAP が一体化\n  → 日々の取引処理（売上や請求など）とデータ分析（売上傾向や利益分析など）を同じシステムで行える。別々のシステムを使う必要がないため、処理がシンプルになる。\n\n- カラムストアによるデータ圧縮\n  → データを列ごとにまとめて保存することで、データ量を減らし処理速度を向上。例：売上データだけをまとめて分析したいときに高速に処理可能。\n\n- 集計テーブルや索引が不要\n  → 従来必要だった「集計済みのテーブル」や「検索用の索引」が不要になり、階層的なデータモデルも使わなくてよい。データの更新や分析がよりシンプルかつ高速になる。\n\n◆ ポイント\n- SAP HANA は「取引処理」と「分析」を同じ場所で行えるデータベース。\n- データの保存方法や構造の工夫により、大量データでもスピーディに処理可能。\n- システム構成がシンプルになり、管理や分析の手間が減る。",        
       },       
       
       # 問題 88
       {   "question_number": 88,
           "question": "SAP Business Technology Platform にはどのような機能がありますか。(2つ選択)",
           "choices": ["顧客がステークホルダのニーズを理解するのをサポートする。" ,
                       "顧客が協働して柔軟なバリューチェーンを構築するのに役立つ。" ,
                       "アプリケーション開発および統合がサポートされる。" ,
                       "データ管理および分析が提供される。",],
           "answer": ["アプリケーション開発および統合がサポートされる。" ,"データ管理および分析が提供される。" ],
           "explanation":"◆ SAP Business Technology Platform (SAP BTP) の特徴・機能\n\n- 統合環境でアプリ開発と自動化\n → 1つのプラットフォーム上でアプリケーションの開発や自動化が可能。別々のツールを使わなくても、一元的に管理できる。\n\n- データとアナリティクスの活用\n → データを収集・分析して、ビジネス上の意思決定をサポート。例えば売上データや顧客情報を統合してリアルタイムで分析可能。\n\n- システム統合と AI 利用\n → 既存のSAPアプリや他社システムと簡単に連携できる。また、AI や機械学習を活用して高度な分析や自動化を実現。\n\n- クラウド上で柔軟に運用\n → 主要なクラウドプロバイダー上で動作するため、インフラ管理を気にせず、ビジネスプロセス全体にわたるアプリケーションを迅速に構築可能。\n\n◆ ポイント\n- SAP BTP は「開発・分析・統合・AI」をまとめて提供するクラウドプラットフォーム。\n- ビジネスプロセス全体でパーソナライズされた体験を実現できる。\n- クラウド上で迅速にアプリや分析を作り、重要なイノベーションを確実に推進できる。",
           
       },       
       
       # 問題 89
       {   "question_number": 89,
           "question": "任意のデータベース上で実行できるSAP Fiori アプリはどれですか。(2つ選択)",
           "choices": ["銀行振込実行" ,
                       "勘定コード表管理" ,
                       "債務概要。" ,
                       "得意先会計伝票",],
           "answer": ["銀行振込実行" ,"勘定コード表管理" ],
           "explanation":"◆ SAP Fiori アプリの種類と特徴\n\n- トランザクションアプリ\n → ABAP を使って従来型の業務機能を提供。\n→ 任意のデータベース上で実行可能。\n例：銀行振込実行 (Make Bank Transfers)、勘定コード表管理 (Manage Chart of Accounts)\n\n- 分析アプリ\n → SAP HANA の分析機能を利用してデータに基づく洞察を提供。\n→ SAP HANA データベース上で実行。\n例：債務概要 (Accounts Payable Overview)\n\n- ファクトシートアプリ\n → SAP HANA のエンタープライズサーチ機能で検索結果を提供。\n→ SAP HANA データベース上で実行。\n例：得意先会計伝票 (Customer Accounting Document)\n\n◆ ポイント\n- SAP Fiori アプリは、トランザクション・分析・ファクトシートの3タイプに分類される。\n\n・任意のデータベースで動かせるのはトランザクションアプリだけ\n。・分析や検索系アプリは SAP HANA 専用で高速処理やインサイト提供が可能。",
           
       },       
       
       # 問題 90
       {   "question_number": 90,
           "question": "SAP S/4HANA でのデータ処理の利点は何ですか。(2つ選択)",
           "choices": ["明細詳細でデータをリアルタイムで利用できる。" ,
                       "メモリ使用を最適化するために、データが常に自動アーカイブされる" ,
                       "任意の明細テーブルからデータがリアルタイムで集計される。" ,
                       "システムのパフォーマンスを向上させるために、データが上位レベルに集約される。",],
           "answer": ["明細詳細でデータをリアルタイムで利用できる。" ,"任意の明細テーブルからデータがリアルタイムで集計される。" ],
           "explanation":"◆ SAP S/4HANA におけるデータ処理\n\n- メモリ優先のデータ管理\n → よく使うデータはメモリに常駐させ、使用頻度の低いデータはディスクに保存。必要に応じてメモリにロードされる。\n → 例：直近の売上データはすぐ分析できるが、過去数年前のデータは必要なときだけ取り出す。\n\n- 明細テーブルからのリアルタイム集計\n → 明細データから直接集計できるため、事前にデータをまとめておく必要がない。\n → 例：売上や在庫の合計をリアルタイムで計算して即座に分析可能。\n\n◆ ポイント\n- SAP HANA の「インメモリ」と「明細リアルタイム集計」により、大量データでも高速処理が可能。\n- 事前集計や複雑な階層データモデルが不要になり、システム構成や分析プロセスがシンプルに。",
           
       },       
              
       # 問題 91
       {   "question_number": 91,
           "question": "SAP Fiori ラウンチパッドでは、ページはどのようにユーザに割り当てられますか。",
           "choices": ["ユーザに割り当てられているビジネスロールに割り当てられたセクションを使用する。" ,
                       "ユーザに割り当てられているビジネスロールに直接割り当てる。" ,
                       "ユーザに割り当てられているビジネスロールに割り当てられたグループを使用する。" ,
                       "ユーザに割り当てられているビジネスロールに割り当てられたスペースを使用する。",],
           "answer": ["ユーザに割り当てられているビジネスロールに割り当てられたスペースを使用する。" ],
           "explanation":"◆ SAP Fiori ラウンチパッドのスペースモード\n\n- スペースモードとは\n → 特定のユーザグループ向けにラウンチパッドのレイアウトを柔軟に変更できる機能。従来のグループモードと切り替えて使用可能。\n → 例：営業部向けのページと管理部向けのページで、それぞれ異なるレイアウトを適用できる。\n\n- スペースとページの割り当て\n → ラウンチパッドのページは、ビジネスロールに割り当てられるスペースを通じてユーザに配布される。\n → ユーザが参照できるスペースは、ビジネスロールで定義される。\n → スペースを有効化することで、ユーザ向けに特定のスペースとページを設定し、操作の適合性を向上できる。\n\n- ページの構造\n → ページはさらにセクションに分かれ、セクション内に SAP Fiori アプリが配置される。\n → 例：ダッシュボードセクション、タスクセクションなどに分けて整理可能。\n\n◆ ポイント\n- スペースモードは、ユーザグループごとにラウンチパッドの表示や配置を柔軟に変更できる。\n- ビジネスロールと組み合わせることで、ユーザごとに最適化されたページ割り当てが可能。\n- ページはセクション単位でアプリを整理でき、操作性や見やすさを向上できる。",
       },       
       
       # 問題 92
       {   "question_number": 92,
           "question": "あなたは、北米のビジネスマーケットに関心があるグループ資金管理者です。 SAP Fiori で利用できるパーソナライゼーションオプションは何ですか。(2つ選択)",
           "choices": ["簡単にアクセスできるよう、日常業務で必要なすべてのアプリが含まれたタイルグループを登録できる。" ,
                       "管理者のサポートを受けずに、チームの関連アプリへのユーザアクセスを管理できる。" ,
                       "北米のビジネスマーケットのキャッシュポジションに直接アクセスできるタイルを登録できる。" ,
                       "資金レポートの事前定義済み値に従って、 ラウンチパッドのカラーテーマを調整できる。"],
           "answer": ["簡単にアクセスできるよう、日常業務で必要なすべてのアプリが含まれたタイルグループを登録できる。","北米のビジネスマーケットのキャッシュポジションに直接アクセスできるタイルを登録できる。" ],
           "explanation":"◆ タイルグループについて\n\n- タイルグループの登録方法\n → システムで一元的に登録してからラウンチパッドに追加する方法。\n → ユーザが独自にグループを作成し、カタログからタイルを追加する方法も可能。\n → 例：財務部用のグループを作成し、必要なアプリだけを追加。\n\n- ユーザのパーソナライゼーションオプション\n → 割り当てられたカタログからアプリを追加できる。\n → 不要なアプリは削除可能。\n → アプリの追加や変更で、必要なレポート結果にすぐアクセス可能。\n → 例：ドイツ市場のグループ資金管理者が、キャッシュポジションを直接確認できるアプリを登録し、ワンクリックで情報を取得。\n\n◆ ポイント\n- タイルグループはシステム一括登録とユーザ独自作成の両方に対応。\n- ユーザは自分の業務に合わせてアプリを追加・削除でき、ラウンチパッドを最適化可能。\n- パーソナライズにより、必要な情報に迅速かつ簡単にアクセスできる。",
           
       },       
       
       # 問題 93
       {   "question_number": 93,
           "question": "SAP Business Network は、 得意先が会社間ビジネスプロセスをデジタル化するのに役立ちます。 ネットワークによって構築されるソリューションはどれですか。(3つ選択)",
           "choices": ["非正規社員" ,
                       "人材管理" ,
                       "調達" ,
                       "旅費",
                       "販売"],
           "answer": ["非正規社員","調達","旅費" ],
           "explanation":"◆ インテリジェントエンタープライズにおけるビジネスネットワーク\n\n- 会社間プロセスのデジタル化支援\n → 顧客が複数の会社やパートナーと行うビジネスプロセスを、デジタル上で効率的に管理できる。\n → 例：仕入れ先との注文や請求、出張費精算、非正規要員の勤怠管理などをネットワーク上で統合。\n\n- SAP ソリューションの基盤利用\n → 調達、出張（旅費）、非正規要員向けの SAP ソリューションを活用。\n → 顧客同士が連携し、柔軟で効率的なバリューチェーンを構築可能。\n\n◆ ポイント\n- ビジネスネットワークは「会社間の連携と業務効率化」をサポート。\n- 調達や出張など複数業務を統合的に管理できるプラットフォーム。\n- SAP 顧客同士の協力で、より柔軟な価値提供が可能になる。",
           
       },    
    ],    
          
    "トピック 7: Clean Core の管理": [
       # 問題 94
       {   "question_number": 94,
           "question": "次のうち、Clear Core 統合を実現するために SAP が使用を推奨するAPI タイプはどれですか。(2つ選択)",
           "choices": ["IDoc" ,
                       "OData",
                       "RFC" ,
                       "SOAP"],                       
           "answer": ["OData","SOAP" ],
           "explanation":"SAP S/4HANA Cloudを他のシステムとつなぐときは、できるだけ標準化されたODataやSOAPというAPIを使って統合することが大切です。\nこれらのAPIを使うと、システム同士でデータをやり取りでき、処理がスムーズで効率よく行えるようになります。\n例えば、ODataやSOAPは「共通の言葉で話す翻訳アプリ」のようなもので、異なるシステム同士でもお互いに情報を正しくやり取りできるイメージです。",
           
       },       
       
       # 問題 95
       {   "question_number": 95,
           "question": "あなたは SAP S/4HANA Cloud ブラウンフィールドプロジェクトのコンサルタントです。 ミーティングで、顧客は Clean Core の原則に従って既存のビジネスモデルを再モデリングすることを決定しました。次のうち、再モデリングに使用できる SAP Signavio ソリューションはどれですか。",
           "choices": ["AP Signavio Process Manager" ,
                       "SAP Signavio Process Governance" ,
                       "SAP Signavio Process Intelligence" ,
                       "SAP Signavio Process Insights"],                       
           "answer": "AP Signavio Process Manager" ,
           "explanation":"SAP Signavioは、企業の業務プロセスを定義、実行、分析するサイクルを支援するビジネスプロセス管理（BPM）のソフトウェアです。\nSAP Signavio Process Managerは業務プロセスをBPMN 2.0の表記法で定義し、各ステップの所要時間やリソースも管理でき、バージョン比較やコスト・時間への影響のシミュレーションも可能です。SAP Signavio Process Governanceは業務部門とIT部門の協働を促進し、改善案の共有や意見交換、承認ワークフローによる合意形成を支援します。SAP Signavio Process Intelligenceはシステムログからプロセスの実行状況を分析し、改善の意思決定を助け、分析結果をBPMN 2.0に変換してプロセスのサイクルを回します。SAP Signavio Process InsightsはERPシステムのプロセス状況を日次で監視・分析し、状況に応じた改善策を提案します。\n例えば、Signavioは「業務フローの地図を作って、進み具合や問題点を見える化し、改善策をチームで相談して決める総合ツール」のようなイメージです。",
           
       },       
       
       # 問題 96
       {   "question_number": 96,
           "question": "Clean Core の運用を実現するために SAP が推奨する原則は何ですか。(3つ選択)",
           "choices": ["プロセス変革オフィスの一環として、役割と責任を定義する。" ,
                       "Clean Core プラクティスをエンドツーエンドのバリュープロセスチェーンに統合する。" ,
                       "定期的なハウスキーピングタスクおよび手順を確立する。" ,
                       "リリース管理を確立する。",
                       "Clean Core の組織構造、 技術基盤、 および変革手法を確立する。"],                       
           "answer": ["Clean Core プラクティスをエンドツーエンドのバリュープロセスチェーンに統合する。" ,
                       "定期的なハウスキーピングタスクおよび手順を確立する。" ,
                       "リリース管理を確立する。"],
           "explanation":"Clean Coreを効果的に運用するための3つの原則は以下の通りです。\n一つ目は、Clean Coreを会社の業務プロセス全体に統合することです。\n戦略的・戦術的・日常的な意思決定でも常にClean Coreを意識して設計・適用します。IT部門がエンドツーエンドのビューとプロセスの所有者として関わることで、意思決定の改善や業務パフォーマンスの向上、企業管理の強化が促進されます。\n二つ目は、リリース管理を重視することです。\nシステムを常に最新のリリースに保つことが重要で、自動更新されない場合は最新リリースを使う努力をし、使えない場合は理由を明確に理解する必要があります。\n三つ目は、定期的なハウスキーピングタスクと手順を確立することです。\nこれにより、システムを整理整頓して効率的に保ち、Clean Coreの状態を維持できます。具体例としては、バックグラウンドジョブの効率的な設計、データインポートやエクスポート用ファイルインターフェイスの使用抑制、ユーザー認証の定期確認と調整などがあります。\n例えば、Clean Coreは「会社の重要なシステムを常に整理整頓して最新状態に保ち、意思決定や業務プロセスの流れをスムーズにする仕組み」のようなイメージです。",
           
       },       
       
       # 問題 97
       {   "question_number": 97,
           "question": "あなたは SAP S/4HANA Cloud グリーンフィールドプロジェクトのコンサルタントです。 次のうち、 Clean Core のデータ品質を達成して維持するために重点を置く必要がある側面はどれですか。(2つ選択)",
           "choices": ["正確性" ,
                       "効率性" ,
                       "適時性" ,
                       "安定性"],                       
           "answer": ["正確性" ,"適時性"],
           "explanation":"データ品質をClean Coreに準拠させるためには、いくつかの重要な側面に注意する必要があります。\n一つ目は正確性です。\nデータがビジネスの実態を正確に反映していることを保証することで、誤った意思決定や非効率なプロセス、システムへの信頼喪失を防ぎます。正確性を維持するには、データ検証ルールや定期的なチェック、データガバナンスプロセスの実施が不可欠です。\n二つ目は完全性です。\nデータが欠けていたり不完全だと業務や意思決定に支障をきたすため、すべての必要なデータが取得・維持されるようにデータ収集プロセスや入力検証、入力標準の適用が必要です。\n三つ目は一貫性です。\n一貫性のないデータは混乱やエラー、非効率性を招くため、データ標準やガイドラインを定め、プロファイリング・クレンジング・統合プロセスを実施します。\n四つ目は適時性です。\n古いデータは意思決定や業務に悪影響を与えるため、リアルタイムキャプチャや更新スケジュールの設定、監視・アラートの仕組みを整えることが重要です。\n五つ目は有効性です。\nデータが定義された基準やビジネスルールに沿い、現実の状況を正しく表すことを保証します。無効なデータは誤解や不明瞭な洞察につながります。\n六つ目は一意性です。重複データを識別・排除し、明確で簡潔な情報を提供することが求められ、検証チェックや整合性制約、重複チェックツールの活用が不可欠です。\n例えば、Clean Coreのデータ品質は「会社の情報を正確・完全・一貫して、最新の状態で管理し、誤解や混乱を避けながら意思決定を支える仕組み」のようなイメージです。",
           
       },       
       
       # 問題 98
       {   "question_number": 98,
           "question": "あなたは SAP S/4HANA Cloud グリーンフィールドプロジェクトのコンサルタントです。 Clean Core ジャーニーの一環として、顧客は現在のIT ランドスケープを分析して冗長なシステムを排除し、 効率的なアーキテクチャ設計を確立する必要があります。 次のうち、 分析に使用できるものはどれですか。",
           "choices": ["Lean IX" ,
                       "SAP Solution Manager" ,
                       "SAP Best Practices" ,
                       "SAP Cloud ALM"],                       
           "answer": "Lean IX",
           "explanation":"LeanIXは、企業のIT全体像（エンタープライズアーキテクチャ）を整理・最適化するためのツールです。\n組織のシステム構成を文書化し、変化するビジネスニーズに合わせてアーキテクチャ変更を計画・設計・管理できます。\n例えば、ITを「街の地図」と考えると、LeanIXはその地図を常に最新にして最適な都市計画を進めるイメージです。\n\nSAP Solution Managerは、SAP製品におけるアプリケーションライフサイクル管理を行うためのシステムです。\nプロジェクト管理、テスト、変更管理、ITサービス管理、運用監視など幅広い機能を備えています。\n例えば「業務システムの総合運転室」のような役割を果たします。\n\nSAP Best Practicesは、世界中の顧客事例をもとにSAP社がまとめた標準テンプレートです。\n導入時に活用することで、実績ある業務プロセスをベースに効率よくシステムを構築できます。\n例えば「完成済みの設計図」を参考に家を建てるようなイメージです。\n\nSAP Cloud ALMは、SAPソリューションのライフサイクルを通じて管理するクラウドベースの仕組みで、SAP Solution Managerの後継にあたります。\n導入タスクの進捗確認や運用状況の可視化（日次機能やジョブの状態確認など）をグラフィカルに行えます。\n例えば「クラウド上で使える進化した運転室」のようなイメージです。",
       },       

       # 問題 99
       {   "question_number": 99,
           "question": "ABAP クラウドネイティブ開発に使用できるモデルはどれですか。",
           "choices": ["ABAP Cloud 開発モデル" ,
                       "SAP S/4HANA Cloud 拡張性モデル" ,
                       "ABAP RESTful アプリケーションプログラミングモデル" ],                       
           "answer": "ABAP Cloud 開発モデル",
           "explanation":"ABAPクラウドは、クラウドネイティブ開発の需要に対応するために作られた、新しいABAPの開発モデルです。\n従来のABAPの良さ（使い慣れた文法や機能）を引き継ぎながら、SAP S/4HANAクラウドに合わない古い仕組みは排除されています。\n\nABAPクラウド開発モデルの特徴は以下の通りです。\n一つ目は、承認されたクラウド用のオブジェクトタイプ（例えばABAP RESTfulアプリケーションプログラミングモデルなど）だけを使って開発することです。\n二つ目は、ABAPクラウド言語が構文チェックで強化されていることです。\n三つ目は、リリース済みAPIの使用も構文チェックで管理されることです。\n四つ目は、開発にはEclipse用のABAP開発ツールを使い、すべての開発オブジェクトを作成することです。\n\n例えば、ABAPクラウドは「従来のABAPをクラウド時代に最適化し、安全かつ最新のルールで使えるようにした進化版」のようなイメージです。",
       },       

       # 問題 100
       {   "question_number": 100,
           "question": "次のうち、リリース済 API を調べるために使用できるものはどれですか。",
           "choices": ["SAP Application Interface Framework" ,
                       "SAP Integration Suite" ,
                       "SAP Business Accelerator Hub"],                       
           "answer": "SAP Business Accelerator Hub",
           "explanation":"SAPのインタフェースやシステム連携にはいくつかのツールがあります。\nSAP Application Interface Framework：\n  バックエンドシステムの中でインタフェースの開発、監視、エラー処理を一元的に行える仕組みです。\nSAP Integration Suite：\n  SAP BTPの機能のひとつで、SAPだけでなく他のさまざまなシステム同士をつなぐためのツールです。\nSAP Business Accelerator Hub：\n  Web上のアプリで、公開されているSAP S/4HANA Cloud向けのAPIを探したり、調べたり、試したりすることができます。\n例えば、Application Interface Frameworkは「工場内の配線盤」で全ての信号をまとめて管理するようなもので、Integration Suiteは「工場と他の会社をつなぐ物流の道路」、Business Accelerator Hubは「使える道路やルートを調べられる地図アプリ」のようなイメージです。"
       },       
    ],    
          
    "トピック 8: 苦手問題たち": [
        # 問題 14	
        {	
            "question": "機能領域はどのレベルで定義しますか。",	
            "choices": [	
                "管理領域",	
                "クライアント",	
                "会社コード",	
                "財務諸表バージョン"	
            ],	
            "answer": "クライアント",	
            "explanation":"機能領域は、会社の中の「どの部門・仕事に費用がかかったか」を管理するための単位です。\n売上原価会計では、費用がどの機能領域に属するかで間接費の集計やレポートが行われます。\n勘定コードマスタに機能領域を設定しておくと、その勘定に関するすべての取引は自動的に設定した機能領域に割り当てられます。\nさらに、機能領域は原価センタや内部指図など、他の費用管理対象にも割り当てることができます。\n例えば、「販売部門」の費用を管理したい場合、販売部門を機能領域として設定すると、販売に関わる間接費が自動的に販売部門に集計されるイメージです。",	
        	
        },	
        
        # 問題 19	
        {	
            "question": "二つの通貨間の外貨換算比率はどのレベルで更新しますか",	
            "choices": ["評価タイプ", "換算レートタイプ", "伝票タイプ", "通貨タイプ"],	
            "answer": "換算レートタイプ",	
            "explanation":"◆ 2つの通貨間の外貨換算比率（換算レート）は、換算レートタイプと有効開始日付ごとに設定します。\n◆ 換算レートタイプは、例えば評価用、換算用、計画用など、用途ごとに分けて定義できます。多くの場合、換算レートタイプ M がデフォルトで使われます。例えば、海外旅行で日本円をドルに換えるときに「観光用レート」と「銀行用レート」を分けて用意しているイメージです。",	
        },	        
        
        # 問題 24	
        {	
            "question_number": 24,	
            "question": "グループ勘定コード表はどこで割り当てますか",	
            "choices": [	
                "会社コード",	
                "会社",	
                "G/L勘定",	
                "運用勘定コード表"	
            ],	
            "answer": "運用勘定コード表",	
            "explanation":"◆ 企業グループでは、複数の会社の会計データをまとめて「連結財務諸表」を作る必要があります。このときに便利なのが「グループ勘定コード表」です。\n◆ 設定の手順はこうなります。\n(1) まず、まとめたい勘定（例えば現金、売掛金など）をすべて入れた「グループ勘定コード表」を作ります。\n(2) その表を運用中の勘定コード表に割り当てます。こうすると、G/L勘定（会社ごとの勘定）にグループ勘定コードの入力欄が必須になります。\n(3) 各G/L勘定に、どのグループ勘定に属するかのコードを入力します。1つのグループ勘定を複数のG/L勘定で共有できます。\n(4) 連結財務諸表用のバージョンを作り、グループ勘定を反映できるようにします。\n例えば、A社とB社の売掛金をまとめて「グループ売掛金」と設定しておくと、グループ全体の売掛金がすぐに集計でき、管理がラクになります。",	
        },	        
        
        # 問題 25	
        {	
            "question_number": 25,	
            "question": "G/L 勘定の勘定コード表レベルで更新される項目はどれですか(3つ選択)",	
            "choices": [	
                "グループ勘定コード",	
                "項目ステータスグループ",	
                "テキスト(短)",	
                "代替勘定コード",	
                "勘定グループ"	
            ],	
            "answer": ["グループ勘定コード", "テキスト(短)", "勘定グループ"],	
            "explanation":"◆ G/L勘定の「勘定コード表レベル」には、主に次の項目があります。\n(1) 制御データ ⇒ G/L勘定の種類（例えば資産や負債）や、勘定をまとめるグループ（勘定グループ）を設定します。\n(2) テキスト ⇒ 勘定名を入力する欄で、「短いテキスト」と「長いテキスト」の2種類があります。短い名前は帳票などに表示、長い名前は詳細説明に使います。\n(3) 連結データ ⇒ グループ全体で集計するための「グループ勘定コード」を設定します。\n例えば、現金勘定の場合、制御データで資産勘定に分類し、テキストで「現金」と入力し、連結データで「グループ現金」に割り当てる、といった形です。",	
        },	        
        
        # 問題 31	
        {	
            "question_number": 31,	
            "question": "通貨タイプはどこで割り当てますか",	
            "choices": [	
                "会社",	
                "評価領域",	
                "会計原則",	
                "元帳",	
            ],	
            "answer": "元帳",	
            "explanation":"◆ 会社コードに割り当てられている元帳では、会社コード通貨だけでなく、他の通貨タイプも追加で割り当てることができます。これを設定すると、複数通貨での管理（パラレル通貨）が可能になります。\nたとえば、日本円を基本通貨にしつつ、米ドルやユーロでも帳簿を管理できるイメージです。\n◆ また、標準システムで用意されている通貨タイプとは異なる通貨を使いたい場合は、独自の通貨タイプを設定することもできます。",	
            	
        },	        
        
        # 問題 37	
        {   "question_number": 37,	
            "question": "3方向照合は、S/4HANA で調達取引を転記するために使用される標準手順です。 どのように動作しますか。",	
            "choices": ["転記日付","入庫日付","入力日付","起算日","伝票日付"],	
            "answer": ["転記日付","入力日付","伝票日付"],	
            "explanation":"3方向照合（購買発注・入庫・請求書）では、転記日付、入力日付、伝票日付を基準に照合が行われます。\n◆ 支払条件で「支払基準日」の初期値として設定できる日付には、伝票日付、転記日付、入力日付の3種類があります。例えば、請求書の日付を基準に支払日を決めたい場合は「伝票日付」を選びます。\n◆ また、「初期値なし」を選ぶこともでき、その場合は毎回支払基準日を手入力で指定する必要があります。\n日付管理は財務・在庫・購買の連携において重要です。",	
        },	        
        
        # 問題 39	
        {   "question_number": 39,	
            "question": "支払方法を定義します。 会社コードのレベルではどのパラメータを定義しますか。(2つ選択)",	
            "choices": ["支払媒体" ,"使用可能通貨" ,"最低支払額と最高支払額" ,"外貨支払可能"],	
            "answer": ["最低支払額と最高支払額" ," 外貨支払可能"],	
            "explanation":"支払方法設定では会社コードごとの制約を設定できます。最低支払額や最高支払額、外貨支払可否は会社コードレベルで管理されます。",	
            	
        },	        
        
        # 問題 41	
        {   "question_number": 41,	
            "question": "ビジネスパートナーマスタレコードで更新する督促関連データは何ですか(2つ選択)",	
            "choices": ["督促保留" ," 督促領域" ," 督促間隔日数" ," 督促キー"],	
            "answer": ["督促保留" ," 督促領域"],	
            "explanation":"◆ 得意先マスタの連絡文書タブ画面では、「督促処理」と「督促保留」を更新することができます。例えば、支払いが遅れている得意先に督促状を出す場合、この画面で処理状況を記録します。\n◆ 「督促領域」はオプション機能ですが、「督促領域」ボタンを押すと別画面が開き、そこから督促領域を更新することができます。\n例えば、複数の部署や地域ごとに督促設定を変えたいときに使います。",	
        },	  
              
        # 問題 44	
        {   "question_number": 44,	
            "question": "督促レベルで設定できるパラメータはどれですか。(2つ選択)",	
            "choices": ["延滞日数" ,"金利フラグ" ,"支払期日までの日数" ,"明細毎猶予日数"],	
            "answer": ["延滞日数" ,"支払期日までの日数"],	
            "explanation":"督促レベルでは、延滞日数や支払期日までの日数を基準に判定や通知タイミングを制御します。日数設定により督促の自動化が可能です。",	
            	
        },	  
        
        # 問題 45	
        {   "question_number": 45,	
            "question": "支払が必要な請求書の入力時には、どの日付が設定される必要がありますか",	
            "choices": ["参照日付" ,"支払日" ,"支払基準日" ,"受注日付"],	
            "answer": "支払基準日",	
            "explanation":"支払予定の決定には支払基準日が重要です。請求書入力時、この日付が基準となって支払スケジュールが作成されます。支払計算の基準日を理解することがポイントです。",	
            	
        },	        
        
        # 問題 48	
        {   "question_number": 48,	
            "question": "連絡文書タイプに対して、次のどのレベルで印刷プログラムおよびそのバリアントを割り当てることができますか。(2つ選択)",	
            "choices": ["会社コード" ,"システム" ,"クライアント" ,"会社"],	
            "answer": ["会社コード","クライアント"],	
            "explanation":"印刷プログラムとバリアントはクライアント全体および会社コード単位で割り当て可能です。文書タイプ設定はスコープ（クライアント／会社コード）を意識します。",	
            	
        },	        
        
       # 問題 56	
       {   "question_number": 56,	
           "question": "固定資産管理の勘定設定はどのレベルで定義しますか。(二つ選択)",	
           "choices": ["クライアント" ,"勘定コード表" ,"会社コード" ,"償却表"],	
           "answer": ["勘定コード表" ,"償却表"],	
           "explanation":"勘定設定とは、固定資産を購入したり売ったりしたときに、どの勘定科目（G/L勘定）を使うかを決める仕組みです。\nこれは資産の種類ごとに割り当てます。実際に設定する際は、どの勘定科目表（勘定コード表）を使うかを選び、さらに償却表にある各償却領域ごとに登録します。\n例えると、「資産の種類ごとに、どの財布からお金を出すか決めるルール」のようなイメージです。",	
           	
       },	        
       # 問題 60	
       {   "question_number": 60,	
           "question": "SAP S/4HANA で建設仮勘定をどのように使用するのかを説明するように求められました。 何を強調すればよいですか。(2つ選択)",	
           "choices": ["建設仮勘定を完全に資本化した後でも、クレジットメモを転記できる。" ,"貸借対照表の償却領域で、 建設仮勘定に対して減価償却の計算と記帳を実行できる。" ,"建設仮勘定を設備予算管理とともに使用することはできない。" ,"建設仮勘定に対する特別税償却と投資援助を転記できる。"],	
           "answer": ["建設仮勘定を完全に資本化した後でも、クレジットメモを転記できる。","建設仮勘定に対する特別税償却と投資援助を転記できる。"],	
           "explanation":"◆ 建設仮勘定の特徴は次のとおりです。\n\n- 標準償却キー「0000」を使うと、建設仮勘定の減価償却は計算されません。\n例えば、工事中の建物はまだ価値が確定していないので、この段階では会計上の償却は行わないイメージです。\n\n- 建設仮勘定では、特別な税控除や投資支援を適用することもできます。また、建設仮勘定の前払金は債務管理のシステムで入力可能です。\n例えば、建設用の資材を先に支払った場合、この処理を記録できます。\n\n- 建設仮勘定を完全に資産として登録した後でも、クレジットメモ（返金や値引きの伝票）を記録できます。このためには、償却データの詳細画面でマイナスの取得価額を許可しておく必要があります。\n例えば、建設費の一部が返金された場合に対応できます。\n\n- 設備予算管理（IM）の建設仮勘定を使うと、大規模な設備投資やプロジェクト管理がしやすくなります。内部指図やプロジェクトと建設仮勘定を連携させることで、進行中の工事や投資の管理が簡単になります。",	
           	
       },	
       
       # 問題 62	
       {   "question_number": 62,	
           "question": "カスタマイジングでは、統合資産取得の技術消込勘定をどのレベルで定義できますか。(2つ選択)",	
           "choices": ["資産クラス" ,"勘定設定" ,"勘定コード表" ,"償却領域"],	
           "answer": ["勘定設定" ,"勘定コード表"],	
           "explanation":"◆ 統合資産取得で使う「技術消込勘定」は、資産の取引で使用する勘定を登録する場所に応じて2通りの方法があります。\n\n- 例えば、会社で設備を購入したときに、その購入金額をどの勘定に振り分けるかを決める設定です。\n\n◆ 設定方法は次の通りです。\n\n(1) 1つの技術消込勘定だけを使う場合\n- 勘定コード表に直接登録します。\n- 例えば、すべての建物購入に同じ勘定を使う場合です。\n\n(2) 複数の技術消込勘定を使う場合\n- 勘定コード表と勘定設定（資産クラスに紐づく設定）の組み合わせで登録します。\n- 例えば、建物と機械で別々の勘定に振り分けたい場合です。",	
       },	
	
       # 問題 63	
       {   "question_number": 63,	
           "question": "償却開始日を決定するには、次のどの日付を使用しますか。",	
           "choices": ["支払基準日" ,"資產評価日" ,"転記日付" ,"取得日"],	
           "answer": "資產評価日",	
           "explanation":"◆ 固定資産管理で「起算日バリアント」という設定を使うと、資産の取引タイプごとに評価日の初期値を決めることができます。\n\n- 例えば、建物購入や機械購入など、それぞれの資産タイプで最初の評価日（取得日）を自動的に設定できます。\n\n◆ 仕組みは次の通りです。\n\n1. 取得転記の資産評価日と期間管理方法を使って、通常償却（毎月の減価償却）の開始日が決まります。\n2. 期間管理方法は、償却キー（どの方法で減価償却するかの設定）によって更新されます。\n\n- 例えば、建物は取得日の翌月1日から償却を開始、機械は取得日当日から償却を開始、といった設定が可能です。\n\nポイントは、「資産の種類ごとに償却開始日を自動で決める設定ができる」という点です。",	
           	
       },	
	       
       # 問題 65	
       {   "question_number": 65,	
           "question": "次のオブジェクトのうち、 資産に原価転記する唯一の統計勘定割当はどれですか。",	
           "choices": ["WBS 要素","内部指図" ,"原価センタ" ,"利益センタ"],	
           "answer": "利益センタ",	
           "explanation":"◆ 原価センタ、内部指図、WBS 要素は、資産マスタに「どの費用に割り当てるか」を決めるために使えます。\n\n- 例えば、工場の機械を購入した場合、その費用を「製造部門の原価センタ」に割り当てることができます。\n\n◆ 内部指図や WBS 要素には「統計目的のみで使う」という区分があります。\n\n- 統計内部指図や統計 WBS 要素は、実際の費用割当には使えません。\n- ただし、原価センタと組み合わせて資産マスタに設定することは可能です。\n - 例：あるプロジェクトの費用を統計的に管理したい場合、統計 WBS 要素を使って記録します。\n\n◆ 利益センタも勘定割当対象の項目には含まれていますが、常に統計目的でしか使われません。\n\nポイントは、「原価センタは実際の費用割当に使い、内部指図や WBS、利益センタは統計目的での管理に使う」ということです。",	
           	
       },	       
       
       # 問題 67	
       {	
           "question_number": 67,	
           "question": "少額資産 (LVA) 管理を設定する必要があります。 必要な作業は何ですか。OLVA の最小金額を3つのレベル (会社コード、 償却領域、 資産クラス) で設定する。",	
           "choices": ["LVA の最小金額を3つのレベル (会社コード、 償却領域、 資産クラス) で設定する。","個別管理で LVA の基本数量単位を定義する。","個別管理または集合管理を使用してLVA を管理するため、 2つの異なる資産クラスを定義する。","OLVA の最大金額を2つのレベル(会社コードおよび償却表) で設定する。"],	
           "answer": "個別管理または集合管理を使用してLVA を管理するため、 2つの異なる資産クラスを定義する。",	
           "explanation":"◆ 少額資産の管理では、個別管理と集合管理のどちらかを選ぶことができます。\n\n例えば、パソコン1台ごとに管理する場合は「個別管理」、消耗品の文房具などをまとめて管理する場合は「集合管理」を使います。\n\n◆ 管理タイプごとに、それぞれ資産クラスを設定する必要があります。\n例えば、個別管理用の資産クラスは「PC用」、集合管理用の資産クラスは「文房具用」と設定します。\n\n◆ 集合管理を選んだ場合は、その資産クラスに「基本単位」（数量の単位）を指定する必要があります。\n例えば、文房具は「セット」単位で管理する、といった指定です。\n\n◆ 少額資産の最大限度額は、会社コードごと、償却領域ごとに設定できます。\n例えば、1台あたり10万円までのパソコンは少額資産として扱う、といった設定です。",	
           	
       },	
	
	
       # 問題 68
       {   "question_number": 68,
           "question": "資産に対して償却記帳を実行します。 特定の資産について、減価償却費を資産マスタデータで指定された原価センタとは異なる原価センタに転記する必要があります。 これをどのようにして実現しますか。",
           "choices": ["「同一」 パラメータを勘定割当設定で無効に設定する。" ,"資産マスタデータから原価センタを削除する。" ,"財務会計明細で代入を登録する。" ," 設定により、対応するエラーを警告に変更する。"],
           "answer": "財務会計明細で代入を登録する。",
           "explanation":"◆ 原価センタは、資産マスタに登録されている原価センタと常に一致させる必要があります。\n例えば、資産マスタで「営業部」の原価センタが設定されている場合、会計伝票でも必ず「営業部」が使われます。\n\n◆ このため、勘定割当対象の設定で「一致（同一）」区分を無効にすることはできません。\n\n◆ ただし、財務会計の伝票明細レベルで代入を行うと、会計伝票の原価センタを変更することが可能です。\n例えば、特別な費用配分で一時的に別の原価センタに振り替えたい場合などです。\n\nポイントは、標準設定ではこの代入機能は無効になっているため、使用する場合は有効化が必要ということです。",
           
       },

       # 問題 76	
       {   "question_number": 76,	
           "question": "SAP S/4HANA で使用できる実地棚卸方式はどれですか。(3つ選択)",	
           "choices": ["実在庫方式" ,	
                       "標準在庫方式" ,	
                       "継続棚卸方式" ,	
                       "循環棚卸方式",	
                       "定期棚卸方式"],	
           "answer": ["継続棚卸方式" ,"循環棚卸方式","定期棚卸方式"],	
           "explanation":"◆ SAP S/4HANA でサポートされている実地棚卸の方法は、次の 3 種類です。\n\n(1) 継続棚卸方式\n- 会計年度を通して在庫の確認が行われます。\n- すべての品目は少なくとも年に 1 回は実地棚卸が必要です。\n\n(2) 定期棚卸方式\n- 貸借対照表の基準日に、すべての在庫品目を一度に確認します。\n- 棚卸の間は倉庫内の在庫移動が制限されます。\n\n(3) 循環棚卸方式\n- 会計年度内に定期的に在庫品目の確認を行います。\n- 確認の間隔は、品目ごとに設定された循環棚卸区分によって異なります。",	
           	
       },       	        
        
       # 問題 80	
       {   "question_number": 80,	
           "question": "会計期間バリアントを使用して転記を制限できるのは、どのレベルですか。(2つ選択)",	
           "choices": ["固定資産番号" ,	
                       "仕入先勘定" ,	
                       "得意先統制勘定" ,	
                       "G/L 勘定",],	
           "answer": ["得意先統制勘定" , "G/L 勘定",],	
           "explanation":"◆ 会計期間の管理では、「会計期間バリアント」を使って、勘定タイプごとにいつ会計期間を開くか閉じるかを設定できます。\n\n管理できる勘定タイプの例は以下の通りです。\n\n- A: 資産\n- D: 得意先勘定\n- K: 仕入先勘定\n- S: 総勘定元帳勘定\n- M: 品目勘定\n- V: 契約勘定\n\n◆ 勘定間隔ごとに G/L 勘定を設定する必要があります。\n補助元帳の場合は、統制勘定を入力することで、統制勘定ごとに会計期間の管理方法を変えることができます。\nポイントは次の通りです。\n\n- 「会計期間バリアント」を使うと、勘定タイプごとに会計期間の開閉を細かく管理できる。\n\n- G/L 勘定ごとに期間を設定する必要がある。\n\n- 補助元帳の場合は統制勘定を指定することで、統制勘定単位で期間管理の方法を変えられる。\n\n要するに、「どの勘定でいつ会計処理できるか」を柔軟にコントロールできる仕組みです。",	
           	
       },       	
       	        
       # 問題 89	
       {   "question_number": 89,	
           "question": "任意のデータベース上で実行できるSAP Fiori アプリはどれですか。(2つ選択)",	
           "choices": ["銀行振込実行" ,	
                       "勘定コード表管理" ,	
                       "債務概要。" ,	
                       "得意先会計伝票",],	
           "answer": ["銀行振込実行" ,"勘定コード表管理" ],	
           "explanation":"◆ SAP Fiori アプリの種類と特徴\n\n- トランザクションアプリ\n → ABAP を使って従来型の業務機能を提供。\n→ 任意のデータベース上で実行可能。\n例：銀行振込実行 (Make Bank Transfers)、勘定コード表管理 (Manage Chart of Accounts)\n\n- 分析アプリ\n → SAP HANA の分析機能を利用してデータに基づく洞察を提供。\n→ SAP HANA データベース上で実行。\n例：債務概要 (Accounts Payable Overview)\n\n- ファクトシートアプリ\n → SAP HANA のエンタープライズサーチ機能で検索結果を提供。\n→ SAP HANA データベース上で実行。\n例：得意先会計伝票 (Customer Accounting Document)\n\n◆ ポイント\n- SAP Fiori アプリは、トランザクション・分析・ファクトシートの3タイプに分類される。\n\n・任意のデータベースで動かせるのはトランザクションアプリだけ\n。・分析や検索系アプリは SAP HANA 専用で高速処理やインサイト提供が可能。",	
       },       
    ],    
}
# ===== トップページ =====
@app.route('/')
def index():
    topics = list(quiz_data.keys())
    progress = session.get("index", 0)
    total = session.get("total", 0)
    return render_template('index.html', topics=topics, progress=progress, total=total)

# ===== クイズ開始 =====
@app.route('/start', methods=['POST'])
def start():
    selected_topics = request.form.getlist('topics')
    shuffle_questions = 'shuffle_questions' in request.form
    shuffle_choices = 'shuffle' in request.form

    if not selected_topics:
        return render_template(
            'index.html',
            topics=list(quiz_data.keys()),
            error="少なくとも1つ選択してください"
        )


    # 複数トピックの問題をまとめる
    questions = []
    for topic in selected_topics:
        if topic in quiz_data:
            for i, q in enumerate(quiz_data[topic]):
                questions.append((topic, i))
                
                
 # 問題シャッフル
    if shuffle_questions:
        random.shuffle(questions)

    session['selected_topics'] = selected_topics
    session['index'] = 0
    session['score'] = 0
    session['questions'] = questions
    session['shuffle_choices'] = shuffle_choices

    return redirect(url_for('quiz'))

# ===== 共通関数: 選択トピックの問題取得 =====
def get_selected_questions():
    selected_topics = session.get('selected_topics', [])
    questions = []
    for topic in selected_topics:
        questions.extend(quiz_data.get(topic, []))
    if session.get("shuffle_questions", False):
        random.shuffle(questions)
    return questions

# ===== 問題表示 =====
@app.route('/quiz')
def quiz():
    index = session.get("index", 0)
    questions = session.get("questions", [])
    total = len(questions)
    session['total'] = total  # トータル数を保存

    if total == 0 or index >= total:
        return redirect(url_for('final_result'))

    topic, q_index = questions[index]   # ← tuple を展開
    question = quiz_data[topic][q_index]
    
    choices = question["choices"][:]
    if session.get("shuffle_choices", True):
        random.shuffle(choices)

    # 出題時の choices を保存
    session['current_choices'] = choices

    is_multiple = isinstance(question["answer"], list)

    return render_template(
        'quiz.html',
        question=question,
        choices=choices,
        is_multiple=is_multiple,
        current=index + 1,
        total=total
    )

# ===== 回答チェック =====
@app.route('/check', methods=['POST'])
def check():
    index = session.get("index", 0)
    questions = session.get("questions", [])
    total = len(questions)

    if total == 0 or index >= total:
        return redirect(url_for('final_result'))
    
    topic, q_index = questions[index]
    question = quiz_data[topic][q_index]
    
    selected = request.form.getlist('choice')
    correct_answer = question["answer"]
    
    if isinstance(correct_answer, list):
        is_correct = set(selected) == set(correct_answer)
    else:
        is_correct = selected == [correct_answer]
        
    # ===== 正誤をセッションに保存 =====
    answered = session.get("answered_questions", {})
    key = f"{topic}|{q_index}"  
    answered[key] = is_correct
    session["answered_questions"] = answered
    
    
    # 全体スコア更新
    if is_correct:
        session["score"] = session.get("score", 0) + 1

    # 出題時の choices を再利用
    choices = session.get("current_choices", question["choices"])

    return render_template(
        'result.html',
        is_correct=is_correct,
        selected=selected,
        answer=correct_answer,
        question=question,
        choices=choices
    )
        
# ===== 次の問題へ =====
@app.route('/next')
def next_question():
    index = session.get("index", 0) + 1
    questions = session.get("questions", [])
    total = len(questions)

    if index >= total:
        return redirect(url_for('final_result'))

    session["index"] = index
    return redirect(url_for('quiz'))

# ===== 最終結果 =====
@app.route('/final_result')
def final_result():
    score = session.get("score", 0)
    total = session.get("total", 0)
    
    # 過去の回答をセッションから取得
    answered = session.get("answered_questions", {})  # {(topic, q_index): True/False}
    
    # 全問題リストをセッションから取得
    questions = session.get("questions", [])

    # トピック別集計
    topic_scores = {}
    for topic, q_index in questions:
        if topic not in topic_scores:
             topic_scores[topic] = {"correct": 0, "incorrect": 0}
    
        key = f"{topic}|{q_index}"
        is_correct = answered.get(key, False)  # True / False / None
    
        if is_correct:
            topic_scores[topic]["correct"] += 1
        else:
            # 不正解 or 未回答も不正解扱い
            topic_scores[topic]["incorrect"] += 1
            
    return render_template(
        'final_result.html',
        score=score,
        total=total,
        topic_scores=topic_scores
    )
    
# ===== 中断 =====
@app.route('/abort', methods=['POST'])
def abort():
    return redirect(url_for('final_result'))

if __name__ == "__main__":
    app.run(debug=True)