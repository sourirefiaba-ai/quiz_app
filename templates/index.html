{% extends 'base.html' %}

{% block title %}トピック選択{% endblock %}

{% block content %}
<h1 class="mb-4">トピックを選んでください</h1>
<form action="{{ url_for('start') }}" method="post">
    <fieldset class="mb-3">
        <legend>トピック（複数選択可）:</legend>
        {% for topic in topics %}
            <div class="form-check">
                <input class="form-check-input" type="checkbox" id="topic{{ loop.index }}" name="topics" value="{{ topic }}">
                <label class="form-check-label" for="topic{{ loop.index }}">{{ topic }}</label>
            </div>
        {% endfor %}
    </fieldset>

    <div class="form-check mb-4">
        <input class="form-check-input" type="checkbox" id="shuffle" name="shuffle" checked>
        <label class="form-check-label" for="shuffle">選択肢を並べ替える</label>
    </div>

    <button type="submit" class="btn btn-primary">開始</button>
</form>

{% if progress and progress < total %}
    <p class="mt-3">現在の進捗: {{ progress }} / {{ total }} 問目</p>
    <form action="{{ url_for('quiz') }}" method="get">
        <button type="submit" class="btn btn-secondary">続きから再開する</button>
    </form>
{% endif %}
{% if error %}
    <div class="alert alert-danger mt-3">{{ error }}</div>
{% endif %}
{% endblock %}
